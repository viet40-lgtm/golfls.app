(()=>{var e={};e.id=974,e.ids=[974],e.modules={96330:e=>{"use strict";e.exports=require("@prisma/client")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},79428:e=>{"use strict";e.exports=require("buffer")},55511:e=>{"use strict";e.exports=require("crypto")},33873:e=>{"use strict";e.exports=require("path")},27910:e=>{"use strict";e.exports=require("stream")},41204:e=>{"use strict";e.exports=require("string_decoder")},4573:e=>{"use strict";e.exports=require("node:buffer")},77598:e=>{"use strict";e.exports=require("node:crypto")},57075:e=>{"use strict";e.exports=require("node:stream")},26267:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>s.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>f,tree:()=>d});var a=r(70260),n=r(28203),l=r(25155),s=r.n(l),o=r(67292),i={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>o[e]);r.d(t,i);let d=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,6610)),"C:\\Users\\viet4\\antigravity\\g-golfls-app\\app\\page.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,19611)),"C:\\Users\\viet4\\antigravity\\g-golfls-app\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,19937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,41485,23)),"next/dist/client/components/unauthorized-error"]}],c=["C:\\Users\\viet4\\antigravity\\g-golfls-app\\app\\page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},f=new a.AppPageRouteModule({definition:{kind:n.RouteKind.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},15236:(e,t,r)=>{"use strict";r.r(t),r.d(t,{"00225b78c02544de725fb2cb37bffc9d05a5b829a3":()=>B,"007aa0bbf7eeca6c75c03b2203a9e07da33e885c7e":()=>V,"0096cee9d9c9f6dc769dc1bcf1154b599231c9a64b":()=>w,"00b4baad4e5e7d1cf69046f6a16a6184cfa0818c2d":()=>a.g8,"00d3affede939c6ad34bf9d9753da361ab617ad749":()=>a.wu,"00f6cc2b22fc15bd8f959459304d32c4e19ecb4964":()=>a.ri,"40009ab4d750cb699b4e9b5e6b95e437c8cb7014de":()=>L,"400e89222081663f9862611ade692d927c3f98cb82":()=>M,"4016392dec2572395a2778fdc23e0642bc0f58bbe6":()=>I,"40179cad928d59cabe33eb581332bb05b821dd37cc":()=>H,"402987608957ba5a79535126794248fadd531c8ec1":()=>A,"402af05f89c159b45f17f2830b792d3febdf95d5ee":()=>m,"402b4883b66d54b97b0d48f5c091d8b96dc92428da":()=>a.uF,"4033df8efde73414210e5703df1db7837294bfb9fb":()=>p,"405955f419b11743d6d7dbb6f62f1a255da70c9235":()=>F,"4066198e8958441a686ff54a8ced7111ac02ffd470":()=>_,"406fc12390af8bd16819160cbaca215638b8b3cea0":()=>O,"4075f3342e6d3a48d8836f55b1fbb6a90b543c7f9e":()=>z,"4082c09ee0a3d3c0abce26a561ec48999b51d2f067":()=>D,"4083c3adc94b0336e5535c15ea070d95939c5ac7db":()=>J,"40b689150b392570b65d04061abdcea422756c5e0c":()=>x,"40cb1e75435c0d8c8601fc320bce364bfc3a62ab0a":()=>C,"40d02882bbd968574d136b30792b70e02bba847d8a":()=>T,"40ebac8213a49df5f28e787bd1324a82bf7c93118c":()=>R,"40ec98da2cf06dc86cb574c105315afb1db2b5eb29":()=>W,"40f07dc4568ad5deba38798d20db8aed003a3c9dfa":()=>$,"40f615f228f316f02dc7425b505b3f645a4862a9b6":()=>y,"601afc27dd48c52bd67b9962307a618a397e3d6ce4":()=>a.$5,"601f4fde4fbd6e1b5ac3501b8e5a7108bc935a03c5":()=>a.BD,"602a98a51ccc7bfbf9bb138677a8d3b4591540c523":()=>g,"602ab54cdb004f360ac765e583fa928d98ec396c70":()=>P,"6038aeb07ddb5749785c1884a0b05486b81185a8e2":()=>v,"606ea665b6e512d612afceddef175c9c5827f9e919":()=>f,"60728f089565641ef1bae86aaf5f9593972fbeaf0c":()=>j,"607df2ca54b152a5f219a8fccfe3671d9550611b55":()=>b,"60afd765424afc5d3e2cf0ca8c9dc4a985f614ee3b":()=>S,"60b34d8116e76596f662ffa7e2f68afdd7f04f06e0":()=>a.xw,"60e408f3d7b3022c976879efd9479e666934c34e14":()=>a.iD,"60e722b8157152e37aaec2f21d2f11b8c1e362c168":()=>k,"70166008d2740b7b372a48fa91912ecb11d61f5186":()=>E,"788f79a4cbf19b85ebe87fed113491584372818a5c":()=>h,"78d54b99254b315713f04e86320ffa065f0417bf83":()=>q,"7fb80666f14a9f33c18cdd051c50dc477a89e4f582":()=>N});var a=r(93662),n=r(21590);r(70376);var l=r(40492),s=r(47735),o=r(99184);function i(e,t,r,a=0){return Number(((e-t-a)*113/r).toFixed(1))}function d(e,t=null){let r=e.map(e=>{let t;return t="differential"in e?e.differential:i(e.score,e.rating,e.slope,e.pcc),{id:e.id,date:e.date,value:t,used:!1}});r.sort((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime());let a=r.slice(0,20),n=a.length;if(n<6)return{handicapIndex:0,differentials:a,isSoftCapped:!1,isHardCapped:!1};let{itemsToUse:l}=n<3?{itemsToUse:0}:3===n||4===n||5===n?{itemsToUse:1}:6===n||n<=8?{itemsToUse:2}:n<=11?{itemsToUse:3}:n<=14?{itemsToUse:4}:n<=16?{itemsToUse:5}:n<=18?{itemsToUse:6}:19===n?{itemsToUse:7}:{itemsToUse:8},s=[...a].sort((e,t)=>e.value-t.value).slice(0,l),o=new Set(s.map(e=>e.id));a.forEach(e=>{o.has(e.id)&&(e.used=!0)});let c=s.reduce((e,t)=>e+t.value,0)/l,u=Number((c*=.96).toFixed(1)),f=!1,p=!1;if(null!==t){let e=t+3,r=t+5;if(u>e){f=!0;let t=u-e;(u=e+t/2)>r&&(p=!0,u=r)}}return{handicapIndex:Number(u.toFixed(1)),differentials:a,lowHandicapIndex:t||void 0,isSoftCapped:f,isHardCapped:p}}var c=r(99344);async function u(e){try{let t=await l.z.player.findUnique({where:{id:e},include:{rounds:{include:{round:!0,teeBox:!0},orderBy:{round:{date:"asc"}}}}});if(!t){console.error(`Player ${e} not found`);return}let r=t.rounds.filter(e=>{let t=!0!==e.round.isLive;e.netScore||e.grossScore;let r=e.grossScore&&e.grossScore>0;return e.teeBox&&r&&t}).map(e=>({id:e.id,date:e.round.date,score:e.grossScore||0,rating:e.teeBox.rating,slope:e.teeBox.slope})),a=d(r,void 0);await l.z.player.update({where:{id:t.id},data:{handicapIndex:a.handicapIndex}}),console.log(`✅ Recalculated handicap for player ${t.name}: ${a.handicapIndex.toFixed(1)}`)}catch(t){console.error(`Error recalculating handicap for player ${e}:`,t)}}async function f(e,t){if(!await l.z.teeBox.findUnique({where:{id:t}}))throw Error("Tee box not found");let r=await l.z.roundPlayer.update({where:{id:e},data:{teeBoxId:t}});(0,s.revalidatePath)(`/scores/${r.roundId}/edit`),(0,s.revalidatePath)("/scores")}async function p(e){let t=e.get("playerId"),r=e.get("teeBoxId"),a=e.get("date"),n=e.get("score");if(!t||!r||!a||!n)throw Error("Missing required fields");let d=parseInt(n),c=await l.z.teeBox.findUnique({where:{id:r},include:{course:{include:{holes:!0}}}});if(!c)throw Error("Tee Box not found");let f=c.courseId||c.course.id;c.course.holes.reduce((e,t)=>e+t.par,0);let p=i(d,c.rating,c.slope,0),h=await l.z.round.findFirst({where:{date:a,courseId:f,isTournament:!1}});h||(h=await l.z.round.create({data:{date:a,courseId:f,courseName:c.course.name,isTournament:!1}})),await l.z.roundPlayer.create({data:{roundId:h.id,playerId:t,teeBoxId:r,grossScore:d,netScore:d,courseHandicap:Math.round(d-p)}}),await u(t),(0,s.revalidatePath)("/players"),(0,s.revalidatePath)("/scores"),(0,o.redirect)("/players")}async function h(e,t,r,a=!1){let n=await l.z.course.findUnique({where:{id:t}});if(!n)throw Error("Course not found");let o=await l.z.round.create({data:{date:e,courseId:t,courseName:n.name,name:r,isTournament:a}});return(0,s.revalidatePath)("/scores"),o}async function x(e){let t=await l.z.course.create({data:{name:e.courseName}}),r=Math.floor(e.par/18),a=e.par%18;for(let e=1;e<=18;e++)await l.z.hole.create({data:{courseId:t.id,holeNumber:e,par:e<=a?r+1:r}});await l.z.teeBox.create({data:{courseId:t.id,name:"Live",rating:e.rating,slope:e.slope,par:e.par}});let n=await l.z.round.create({data:{date:e.date.includes("T")?e.date:`${e.date}T12:00:00`,courseId:t.id,name:e.name,courseName:e.courseName,isTournament:!1}});return(0,s.revalidatePath)("/"),(0,s.revalidatePath)("/scores"),n}async function b(e,t){t.courseId?await l.z.$transaction([l.z.round.update({where:{id:e},data:{date:t.date,name:t.name,isTournament:t.isTournament,courseId:t.courseId}}),l.z.roundPlayer.updateMany({where:{roundId:e},data:{teeBoxId:""}})]):await l.z.round.update({where:{id:e},data:{date:t.date,name:t.name,isTournament:t.isTournament}}),(0,s.revalidatePath)(`/scores/${e}/edit`),(0,s.revalidatePath)("/scores")}async function m(e){try{let t=await l.z.roundPlayer.findMany({where:{roundId:e},select:{id:!0}});t.length>0&&await l.z.score.deleteMany({where:{roundPlayerId:{in:t.map(e=>e.id)}}}),await l.z.roundPlayer.deleteMany({where:{roundId:e}}),await l.z.round.delete({where:{id:e}}),(0,s.revalidatePath)("/scores"),(0,s.revalidatePath)("/")}catch(e){throw console.error("Error deleting round:",e),e}}async function g(e,t){let r=await l.z.round.findUnique({where:{id:e},include:{course:{include:{teeBoxes:!0}}}});if(!r)throw Error("Round not found");let a=r.course.teeBoxes.find(e=>"White"===e.name)||r.course.teeBoxes[0];await l.z.roundPlayer.createMany({data:t.map(t=>({roundId:e,playerId:t,grossScore:null,teeBoxId:a?.id,courseHandicap:0}))}),(0,s.revalidatePath)(`/scores/${e}/edit`),(0,s.revalidatePath)("/scores")}async function y(e){try{await l.z.score.deleteMany({where:{roundPlayerId:e}});let t=await l.z.roundPlayer.delete({where:{id:e}});(0,s.revalidatePath)(`/scores/${t.roundId}/edit`),(0,s.revalidatePath)("/scores")}catch(e){throw console.error("Error removing player:",e),e}}async function w(){let e=await l.z.course.findFirst();if(!e)throw Error("No courses found. Please create a course first.");let t=new Date,r=new Date(t.getTime()-6e4*t.getTimezoneOffset()).toISOString().split("T")[0];return(await l.z.round.create({data:{date:r+"T12:00:00",courseId:e.id,courseName:e.name,name:"",isTournament:!1}})).id}async function v(e,t){let r=await l.z.course.findFirst();if(!r)throw Error("No courses found. Please create a course first.");let a=t.includes("T")?t:`${t}T12:00:00`;return(await l.z.round.create({data:{date:a,courseId:r.id,courseName:r.name,name:e,isTournament:!0}})).id}async function N(e,t,r,a,n,o,i){let d=await l.z.roundPlayer.findUnique({where:{id:e},include:{teeBox:!0,round:{include:{course:{include:{holes:!0}}}}}});if(!d)throw Error("Round Player not found");let c=t;if(i&&i.length>0){let e=new Map(d.round.course.holes.map(e=>[e.id,e]));c=function(e){let t=0,r=[];for(let a of e){let e=a.par+2;a.strokes>e?(t+=e,r.push({holeNumber:a.holeNumber,original:a.strokes,adjusted:e})):t+=a.strokes}return{adjustedGrossScore:t,adjustedHoles:r}}(i.map(t=>{let r=e.get(t.holeId);if(!r)throw Error(`Hole ${t.holeId} not found`);return{holeNumber:r.holeNumber,par:r.par,strokes:t.strokes}})).adjustedGrossScore}await l.z.$transaction(async l=>{await l.roundPlayer.update({where:{id:e},data:{grossScore:t,netScore:c,frontNine:r,backNine:a,points:n,payout:o}}),i&&i.length>0&&(await l.score.deleteMany({where:{roundPlayerId:e}}),await l.score.createMany({data:i.map(t=>({roundPlayerId:e,holeId:t.holeId,strokes:t.strokes}))}))});let f=await l.z.roundPlayer.findUnique({where:{id:e},select:{playerId:!0}});f&&await u(f.playerId),(0,s.revalidatePath)(`/scores/${d.round.id}/edit`),(0,s.revalidatePath)("/scores")}async function j(e,t){try{await l.z.$transaction(async r=>{for(let a of(await r.roundPlayer.findMany({where:{roundId:e},select:{id:!0,playerId:!0}}))){let e=t.includes(a.playerId);await r.roundPlayer.update({where:{id:a.id},data:{inPool:e}})}}),(0,s.revalidatePath)("/pool"),(0,s.revalidatePath)("/scores")}catch(e){throw console.error("SERVER ACTION ERROR: updatePoolParticipants:",e),Error(e instanceof Error?e.message:"Failed to update pool participants")}}async function k(e,t){try{await l.z.$transaction(async r=>{for(let a of t)await r.roundPlayer.updateMany({where:{roundId:e,playerId:a.playerId},data:{payout:a.amount}})}),(0,s.revalidatePath)("/pool"),(0,s.revalidatePath)("/scores")}catch(e){throw console.error("SERVER ACTION ERROR: saveRoundWinnings:",e),Error("Failed to save winnings")}}async function S(e,t){let r=await l.z.event.create({data:{name:e,date:t}});return(0,s.revalidatePath)("/schedule"),r}async function C(e){await l.z.event.delete({where:{id:e}}),(0,s.revalidatePath)("/schedule")}async function P(e,t){let r;let a={teeBoxes:!0,holes:!0};if(e.courseId){if(!(r=await l.z.course.findUnique({where:{id:e.courseId},include:a})))throw Error("Course not found.")}else if(!(r=await l.z.course.findFirst({include:a})))throw Error("No courses found.");let n=t.map(e=>e.playerId),o=new Map((await l.z.player.findMany({where:{id:{in:n}},select:{id:!0,handicapIndex:!0}})).map(e=>[e.id,e])),i=await l.z.round.create({data:{date:e.date,courseId:r.id,courseName:r.name,name:e.name,isTournament:e.isTournament}});if(t.length>0){let e=r.teeBoxes.find(e=>"White"===e.name)||r.teeBoxes[0],a=new Map(r.holes.map(e=>[e.id,{id:e.id,holeNumber:e.holeNumber,par:e.par}])),n=r.holes.reduce((e,t)=>e+t.par,0);for(let s of t){let t=s.teeBoxId||e?.id,d=r.teeBoxes.find(e=>e.id===t),c=o.get(s.playerId),u=null,f=null,p=0;if(s.scores&&s.scores.length>0){let e=0,t=0;for(let r of s.scores){let n=a.get(r.holeId);n&&(n.holeNumber<=9?e+=r.strokes:t+=r.strokes)}u=e>0?e:null,f=t>0?t:null}c&&d&&(p=Math.round(c.handicapIndex*(d.slope/113)+(d.rating-n)));let h=s.gross??null,x=h?h-p:null;if(!t)continue;let b=await l.z.roundPlayer.create({data:{roundId:i.id,playerId:s.playerId,grossScore:h,courseHandicap:p,netScore:x,indexAtTime:c?.handicapIndex||0,points:s.points||0,payout:s.payout||0,teeBoxId:t,frontNine:u,backNine:f}});s.scores&&s.scores.length>0&&await l.z.score.createMany({data:s.scores.map(e=>({roundPlayerId:b.id,holeId:e.holeId,strokes:e.strokes}))})}}return(0,s.revalidatePath)("/scores"),i.id}async function R(e){let t=`${e.firstName.trim()} ${e.lastName.trim()}`;if(!e.email||!e.phone)throw Error("Email and Phone are required.");try{let r=await l.z.player.create({data:{name:t,email:e.email,phone:e.phone,handicapIndex:e.handicapIndex}});return(0,s.revalidatePath)("/"),(0,s.revalidatePath)("/players"),r}catch(e){if(console.error("Error creating player:",e),"P2002"===e.code)throw Error("A player with this email already exists.");throw Error("Failed to create player. Please check inputs.")}}async function I(e){console.log("SERVER ACTION: createLiveRound starting...",e.name);try{let t=await l.z.liveRound.create({data:{name:e.name,date:e.date,course:{connect:{id:e.courseId}},courseName:e.courseName,par:e.par,rating:e.rating,slope:e.slope}});return console.log("SERVER ACTION: createLiveRound SUCCESS:",t.id),(0,s.revalidatePath)("/"),{success:!0,liveRoundId:t.id}}catch(e){return console.error("SERVER ACTION: createLiveRound FAILED:",e),{success:!1,error:e instanceof Error?e.message:"Failed to create live round"}}}async function E(e,t,a){try{let n=await l.z.course.findFirst({where:{name:{contains:"City Park North",mode:"insensitive"}},include:{teeBoxes:!0,holes:!0}});if(n||(n=await l.z.course.findFirst({include:{teeBoxes:!0,holes:!0}})),!n)throw Error("No course found");let o=n.teeBoxes.find(e=>e.name.toLowerCase().includes("white"))||n.teeBoxes[0],{getSession:i}=await r.e(942).then(r.bind(r,94942)),d=await i(),c=`Live Round - ${e}`,u=null;if(d&&d.email){let r=t||d.name||d.email.split("@")[0];c=a?`${r} ${a}`:`${r} - ${e}`;let n=await l.z.player.findUnique({where:{email:d.email},select:{id:!0,preferredTeeBox:!0}});n&&(u=n)}else t&&a?c=`${t} ${a}`:t?c=`${t} - ${e}`:a&&(c+=` (${a})`);let f=await l.z.liveRound.create({data:{name:c,date:e,courseId:n.id,courseName:n.name,par:n.holes.reduce((e,t)=>e+t.par,0),rating:o.rating,slope:o.slope}});if(u){let e=o.id;if(u.preferredTeeBox){let t=n.teeBoxes.find(e=>e.name.toLowerCase()===u.preferredTeeBox?.toLowerCase());t&&(e=t.id)}await $({liveRoundId:f.id,playerId:u.id,teeBoxId:e})}return(0,s.revalidatePath)("/"),{success:!0,roundId:f.id}}catch(e){return console.error("Error creating live round:",e),{success:!1,error:"Failed to create round"}}}async function M(e){try{for(let t of(await l.z.liveRound.update({where:{id:e.id},data:{name:e.name,date:e.date,course:{connect:{id:e.courseId}},par:e.par,rating:e.rating,slope:e.slope},include:{players:!0}})).players){let r=t.indexAtTime||0,a=Math.round(r*(e.slope/113)+(e.rating-e.par));await l.z.liveRoundPlayer.update({where:{id:t.id},data:{courseHandicap:a}})}return(0,s.revalidatePath)("/"),{success:!0}}catch(e){return console.error("Failed to update live round:",e),{success:!1,error:e instanceof Error?e.message:"Failed to update live round"}}}async function $(e){console.log("SERVER ACTION: addPlayerToLiveRound starting...",e.playerId,"to",e.liveRoundId);try{let t=await l.z.player.findUnique({where:{id:e.playerId}}),r=await l.z.teeBox.findUnique({where:{id:e.teeBoxId},include:{course:{include:{holes:!0}}}});if(!t||!r)throw Error("Player or tee box not found");let a=t.handicapIndex||0,n=r.course.holes.reduce((e,t)=>e+t.par,0),o=await l.z.liveRoundPlayer.findFirst({where:{liveRoundId:e.liveRoundId,playerId:e.playerId}});if(o)return await l.z.liveRoundPlayer.update({where:{id:o.id},data:{scorerId:e.scorerId}}),(0,s.revalidatePath)("/"),{success:!0,liveRoundPlayerId:o.id};let i=await l.z.liveRoundPlayer.create({data:{liveRoundId:e.liveRoundId,playerId:e.playerId,teeBoxId:e.teeBoxId,indexAtTime:a,teeBoxName:r.name,courseHandicap:Math.round(a*(r.slope/113)+(r.rating-n)),scorerId:e.scorerId}});return console.log("SERVER ACTION: addPlayerToLiveRound SUCCESS:",i.id),(0,s.revalidatePath)("/"),{success:!0,liveRoundPlayerId:i.id}}catch(e){return console.error("SERVER ACTION: addPlayerToLiveRound FAILED:",e),{success:!1,error:e instanceof Error?e.message:"Failed to add player"}}}async function _(e){try{return await l.z.liveRoundPlayer.update({where:{id:e.liveRoundPlayerId},data:{scorerId:e.scorerId}}),(0,s.revalidatePath)("/"),{success:!0}}catch(e){return console.error("Failed to update player scorer:",e),{success:!1,error:"Failed to update scorer"}}}async function z(e){try{let t=await l.z.liveRound.findUnique({where:{id:e.liveRoundId},include:{course:{include:{teeBoxes:!0}}}});if(!t)throw Error("Live Round not found");let r=t.course.teeBoxes[0];if(!r)throw Error("No tee boxes found for course");let a=await l.z.liveRoundPlayer.create({data:{liveRoundId:e.liveRoundId,isGuest:!0,guestName:e.guestName,teeBoxId:r.id,teeBoxName:r.name||"Guest",indexAtTime:e.index,courseHandicap:e.courseHandicap,scorerId:e.scorerId}});return(0,s.revalidatePath)("/"),{success:!0,guestPlayerId:a.id}}catch(e){return console.error("Failed to add guest to live round:",e),{success:!1,error:e instanceof Error?e.message:"Failed to add guest"}}}async function T(e){try{return await l.z.liveRoundPlayer.update({where:{id:e.guestPlayerId},data:{guestName:e.guestName,indexAtTime:e.index,courseHandicap:e.courseHandicap}}),(0,s.revalidatePath)("/"),{success:!0}}catch(e){return console.error("Failed to update guest:",e),{success:!1,error:e instanceof Error?e.message:"Failed to update guest"}}}async function F(e){try{return await l.z.liveRoundPlayer.delete({where:{id:e}}),(0,s.revalidatePath)("/"),{success:!0}}catch(e){return console.error("Failed to delete guest:",e),{success:!1,error:e instanceof Error?e.message:"Failed to delete guest"}}}async function D(e){try{let t=await l.z.liveRound.findUnique({where:{id:e.liveRoundId},include:{course:{include:{holes:!0}}}});if(!t)throw Error("Live round not found");let r=t.course.holes.find(t=>t.holeNumber===e.holeNumber);if(!r)throw Error(`Hole ${e.holeNumber} not found`);for(let t of e.playerScores){let a=await l.z.liveRoundPlayer.findFirst({where:{liveRoundId:e.liveRoundId,OR:[{playerId:t.playerId},{id:t.playerId}]}});if(!a){console.warn(`Player ${t.playerId} not found in live round`);continue}if(e.scorerId){if(a.scorerId&&a.scorerId!==e.scorerId)throw Error(`Scoring locked by another device for ${a.guestName||"player"}`);a.scorerId||await l.z.liveRoundPlayer.update({where:{id:a.id},data:{scorerId:e.scorerId}})}let n=await l.z.liveScore.findFirst({where:{liveRoundPlayerId:a.id,holeId:r.id}});n?await l.z.liveScore.update({where:{id:n.id},data:{strokes:t.strokes}}):await l.z.liveScore.create({data:{liveRoundPlayerId:a.id,holeId:r.id,strokes:t.strokes}});let s=await l.z.liveScore.findMany({where:{liveRoundPlayerId:a.id},include:{hole:{select:{holeNumber:!0}}}}),o=0,i=0,d=0;s.forEach(e=>{o+=e.strokes,e.hole.holeNumber<=9?i+=e.strokes:d+=e.strokes}),await l.z.liveRoundPlayer.update({where:{id:a.id},data:{grossScore:o,frontNine:i>0?i:null,backNine:d>0?d:null}})}return(0,s.revalidatePath)("/"),{success:!0}}catch(e){return console.error("Failed to save live score:",e),{success:!1,error:e instanceof Error?e.message:"Failed to save score"}}}async function A(e){try{return await l.z.liveRound.delete({where:{id:e}}),(0,s.revalidatePath)("/"),{success:!0}}catch(e){return console.error("Failed to delete live round:",e),{success:!1,error:e instanceof Error?e.message:"Failed to delete round"}}}async function B(){try{let e=await l.z.liveRound.findMany({orderBy:{createdAt:"desc"},select:{id:!0,name:!0,date:!0,createdAt:!0}});return{success:!0,rounds:e}}catch(e){return console.error("Failed to get live rounds:",e),{success:!1,error:e instanceof Error?e.message:"Failed to get rounds",rounds:[]}}}async function L(e){try{let t=await l.z.roundPlayer.findUnique({where:{id:e},include:{player:!0,round:{include:{course:{include:{holes:{orderBy:{holeNumber:"asc"}}}}}},teeBox:!0,scores:{include:{hole:!0},orderBy:{hole:{holeNumber:"asc"}}}}});if(!t)return{error:"Scorecard not found"};return{data:t}}catch(e){return console.error("Error fetching scorecard:",e),{error:"Failed to fetch scorecard details"}}}async function O(e){try{let t=await l.z.round.findUnique({where:{id:e},include:{course:{include:{holes:!0}},players:{include:{player:!0,teeBox:!0,scores:{include:{hole:!0}}}}}});if(!t)return{success:!1,error:"Round not found"};let r=await l.z.$queryRaw`
            SELECT player_id, in_pool FROM round_players WHERE round_id = ${t.id}
        `,a=new Map(r.map(e=>[e.player_id,!!e.in_pool])),n=await l.z.round.findMany({orderBy:{date:"desc"},select:{date:!0,id:!0,isTournament:!0,name:!0,_count:{select:{players:!0}}}}),s=t.players.filter(e=>{let t=a.get(e.player_id)||a.get(e.playerId);return!0===t}),o=s.filter(e=>e.teeBox&&null!==e.grossScore),i=5*s.length,d=[{name:"All Players",players:o,pot:i}],c=t.course?.holes.reduce((e,t)=>e+t.par,0)||72,u=e=>{let r=e.player.handicapIndex,a=e.teeBox?.slope||113,n=e.teeBox?.rating||c,l=Math.round(a/113*r+(n-c)),s=e.frontNine,o=e.backNine;if(!s||!o){let t=e.scores||[],r=t.filter(e=>e.hole.holeNumber<=9).reduce((e,t)=>e+t.strokes,0),a=t.filter(e=>e.hole.holeNumber>9).reduce((e,t)=>e+t.strokes,0);r>0&&(s=r),a>0&&(o=a)}s=s??Math.floor((e.grossScore||0)/2),o=o??Math.ceil((e.grossScore||0)/2);let i=e.grossScore,d=0,u=0;t.course?.holes?t.course.holes.forEach(e=>{let t=e.difficulty||18,r=Math.floor(l/18)+(t<=l%18?1:0);e.holeNumber<=9?d+=r:u+=r}):(d=Math.round(l/2),u=l-d);let f=s-d,p=o-u,h=e.scores.map(e=>{let t=e.hole,r=t.difficulty||18;return{holeNumber:t.holeNumber,difficulty:r,grossScore:e.strokes}}).sort((e,t)=>e.difficulty-t.difficulty);return{id:e.player.id,name:e.player.name,courseHcp:l,frontHcp:d,backHcp:u,frontGross:s,backGross:o,totalGross:i,frontNet:f,backNet:p,totalNet:i-l,grossHoleScores:h}},f=d.map(e=>{let t=e.players.map(u),r=.4*e.pot,a=.4*e.pot,n=.2*e.pot,l=(e,r)=>{if(0===t.length||r<=0)return[];let a=[...t].sort((t,r)=>{if(t[e]!==r[e])return t[e]-r[e];let a=t=>"frontNet"===e?t.holeNumber<=9:"backNet"!==e||t.holeNumber>9,n=t.grossHoleScores.filter(a),l=r.grossHoleScores.filter(a);for(let e=0;e<n.length;e++)if(n[e].grossScore!==l[e].grossScore)return n[e].grossScore-l[e].grossScore;return 0}),n=[.5,.3,.2],l=[],s=0,o=0;for(;s<n.length&&o<a.length;){let t=a[o][e],i=a[o].grossHoleScores,d=a.slice(o).filter(r=>r[e]===t&&JSON.stringify(r.grossHoleScores)===JSON.stringify(i)),c=d.length,u=0;for(let e=0;e<c;e++)s+e<n.length&&(u+=n[s+e]);let f=r*u/c;f>0&&d.forEach(t=>{l.push({...t,score:t[e],gross:"frontNet"===e?t.frontGross:"backNet"===e?t.backGross:t.totalGross,amount:f,position:s+1})}),s+=c,o+=c}return l};return{...e,results:t,frontWinners:l("frontNet",r),backWinners:l("backNet",a),totalWinners:l("totalNet",n),pots:{front:r,back:a,total:n}}}),p=new Map;f.forEach(e=>{[...e.frontWinners,...e.backWinners,...e.totalWinners].forEach(e=>{let t=p.get(e.name)||0;p.set(e.name,t+e.amount)})});let h=Array.from(p.entries());return{success:!0,data:{allPoolParticipants:s.map(e=>({player_id:e.player_id||e.playerId,player:{name:e.player.name}})),poolActivePlayers:o.map(e=>({player_id:e.player_id||e.playerId,player:{name:e.player.name}})),round:{id:t.id,date:t.date,name:t.name,isTournament:t.isTournament,players:t.players.map(e=>({id:e.id,player_id:e.playerId,player:{id:e.player.id,name:e.player.name}}))},flights:d,processedFlights:f,winningsArray:h,allRounds:n}}}catch(e){return console.error("Error in getPoolResults:",e),{success:!1,error:"Internal server error"}}}async function U(){try{console.log("\uD83D\uDE80 Starting Simplified Handicap Recalculation...");let e=await l.z.player.findMany({include:{rounds:{include:{round:!0,teeBox:!0}}}});for(let t of e)try{let e=t.rounds.filter(e=>e.grossScore&&(e.teeBoxId||e.teeBox)).map(e=>({id:e.id,date:e.round.date,score:e.grossScore||0,rating:e.teeBox?.rating||0,slope:e.teeBox?.slope||113,timestamp:new Date(e.round.date).getTime()})).sort((e,t)=>e.timestamp-t.timestamp),r=[];for(let t of e){let e=d(r,null).handicapIndex;r.push({id:t.id,date:t.date,score:t.score,rating:t.rating,slope:t.slope}),await l.z.roundPlayer.update({where:{id:t.id},data:{indexAtTime:e}})}let a=d(r,null);await l.z.player.update({where:{id:t.id},data:{handicapIndex:a.handicapIndex}})}catch(e){console.error(`failed to process player ${t.name}:`,e)}return console.log(`✅ Recalculation Complete. Updated rounds for ${e.length} players.`),(0,s.revalidatePath)("/scores"),(0,s.revalidatePath)("/players"),{success:!0,message:`Recalculated handicaps for ${e.length} players with current schema.`}}catch(e){return console.error("Recalculation failed:",e),{success:!1,message:"Failed to recalculate handicaps."}}}async function H(e){try{let t=await l.z.liveRound.findUnique({where:{id:e.liveRoundId},include:{course:{include:{holes:!0}},players:{include:{player:!0,teeBox:!0,scores:{include:{hole:!0}}}}}});if(!t)return{success:!1,error:"Live round not found"};let r=t.players.filter(t=>e.playerIds.includes(t.id));if(0===r.length)return{success:!1,error:"No players selected"};let a=await l.z.round.findFirst({where:{date:t.date,courseId:t.courseId}});a||(a=await l.z.round.create({data:{date:t.date,courseId:t.courseId,courseName:t.courseName,name:t.name,isTournament:!1}}));let n=0,o=0;for(let e of r){if(e.isGuest||!e.playerId||await l.z.roundPlayer.findFirst({where:{roundId:a.id,playerId:e.playerId}})){o++;continue}let t=null!==e.grossScore?e.grossScore-e.courseHandicap:null,r=await l.z.roundPlayer.create({data:{roundId:a.id,playerId:e.playerId,teeBoxId:e.teeBoxId,courseHandicap:e.courseHandicap,grossScore:e.grossScore,netScore:t,frontNine:e.frontNine,backNine:e.backNine}});for(let t of e.scores)await l.z.score.create({data:{roundPlayerId:r.id,holeId:t.holeId,strokes:t.strokes}});n++}return n>0&&(console.log("Recalculating handicaps after copying live scores..."),await U()),(0,s.revalidatePath)("/scores"),(0,s.revalidatePath)("/players"),{success:!0,copiedCount:n,skippedCount:o,message:`Copied ${n} player(s) to club scores. ${o>0?`Skipped ${o} (guests or duplicates).`:""}${n>0?" Handicaps recalculated.":""}`}}catch(e){return console.error("Failed to copy live scores to club:",e),{success:!1,error:e instanceof Error?e.message:"Failed to copy scores"}}}async function W(e){try{return await l.z.liveRoundPlayer.delete({where:{id:e}}),(0,s.revalidatePath)("/"),{success:!0}}catch(e){return console.error("Failed to remove player from live round:",e),{success:!1,error:e instanceof Error?e.message:"Failed to remove player"}}}(0,c.D)([u]),(0,n.A)(u,"401798f881145c982dba21b6e83ecc61f34bdf77d2",null),(0,c.D)([f,p,h,x,b,m,g,y,w,v,N,j,k,S,C,P,R]),(0,n.A)(f,"606ea665b6e512d612afceddef175c9c5827f9e919",null),(0,n.A)(p,"4033df8efde73414210e5703df1db7837294bfb9fb",null),(0,n.A)(h,"788f79a4cbf19b85ebe87fed113491584372818a5c",null),(0,n.A)(x,"40b689150b392570b65d04061abdcea422756c5e0c",null),(0,n.A)(b,"607df2ca54b152a5f219a8fccfe3671d9550611b55",null),(0,n.A)(m,"402af05f89c159b45f17f2830b792d3febdf95d5ee",null),(0,n.A)(g,"602a98a51ccc7bfbf9bb138677a8d3b4591540c523",null),(0,n.A)(y,"40f615f228f316f02dc7425b505b3f645a4862a9b6",null),(0,n.A)(w,"0096cee9d9c9f6dc769dc1bcf1154b599231c9a64b",null),(0,n.A)(v,"6038aeb07ddb5749785c1884a0b05486b81185a8e2",null),(0,n.A)(N,"7fb80666f14a9f33c18cdd051c50dc477a89e4f582",null),(0,n.A)(j,"60728f089565641ef1bae86aaf5f9593972fbeaf0c",null),(0,n.A)(k,"60e722b8157152e37aaec2f21d2f11b8c1e362c168",null),(0,n.A)(S,"60afd765424afc5d3e2cf0ca8c9dc4a985f614ee3b",null),(0,n.A)(C,"40cb1e75435c0d8c8601fc320bce364bfc3a62ab0a",null),(0,n.A)(P,"602ab54cdb004f360ac765e583fa928d98ec396c70",null),(0,n.A)(R,"40ebac8213a49df5f28e787bd1324a82bf7c93118c",null),(0,c.D)([I,E,M,$,_,z,T,F,D,A,B]),(0,n.A)(I,"4016392dec2572395a2778fdc23e0642bc0f58bbe6",null),(0,n.A)(E,"70166008d2740b7b372a48fa91912ecb11d61f5186",null),(0,n.A)(M,"400e89222081663f9862611ade692d927c3f98cb82",null),(0,n.A)($,"40f07dc4568ad5deba38798d20db8aed003a3c9dfa",null),(0,n.A)(_,"4066198e8958441a686ff54a8ced7111ac02ffd470",null),(0,n.A)(z,"4075f3342e6d3a48d8836f55b1fbb6a90b543c7f9e",null),(0,n.A)(T,"40d02882bbd968574d136b30792b70e02bba847d8a",null),(0,n.A)(F,"405955f419b11743d6d7dbb6f62f1a255da70c9235",null),(0,n.A)(D,"4082c09ee0a3d3c0abce26a561ec48999b51d2f067",null),(0,n.A)(A,"402987608957ba5a79535126794248fadd531c8ec1",null),(0,n.A)(B,"00225b78c02544de725fb2cb37bffc9d05a5b829a3",null),(0,c.D)([L]),(0,n.A)(L,"40009ab4d750cb699b4e9b5e6b95e437c8cb7014de",null),(0,c.D)([O]),(0,n.A)(O,"406fc12390af8bd16819160cbaca215638b8b3cea0",null),(0,c.D)([U]),(0,n.A)(U,"00e7963ac3a176a8b2f2b025824dc01195d0c3e0b6",null),(0,c.D)([H]),(0,n.A)(H,"40179cad928d59cabe33eb581332bb05b821dd37cc",null),(0,c.D)([W]),(0,n.A)(W,"40ec98da2cf06dc86cb574c105315afb1db2b5eb29",null);let G=new(r(61769)).u(process.env.RESEND_API_KEY);async function q(e,t,r,a="Golf Scorecard"){if(!process.env.RESEND_API_KEY)return console.error("RESEND_API_KEY is missing"),{success:!1,error:"Email service configuration missing"};try{let n=e.split(";").map(e=>e.trim()).filter(e=>e.length>0);if(0===n.length)return{success:!1,error:"No recipients provided"};console.log(`Sending individual emails to ${n.length} recipients...`);let{data:l,error:s}=await G.emails.send({from:`${a} <scorecard@score.cpgc.app>`,to:n,replyTo:"viet53@gmail.com",subject:t,html:r});if(s)return console.error("Failed to send group email:",s),{success:!1,error:s};return{success:!0,data:l}}catch(e){return console.error("Failed to send email:",e),{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}(0,c.D)([q]),(0,n.A)(q,"78d54b99254b315713f04e86320ffa065f0417bf83",null);var Y=r(42385);async function J(e){try{let t=await (0,Y.UL)(),r=t.get("session_userId")?.value;if(!r)return{success:!1,error:"You must be logged in to delete a round"};if(!await l.z.liveRoundPlayer.findFirst({where:{liveRoundId:e,playerId:r}}))return{success:!1,error:"You can only delete rounds you participated in"};return await l.z.liveRound.delete({where:{id:e}}),(0,s.revalidatePath)("/"),{success:!0}}catch(e){return console.error("Failed to delete user live round:",e),{success:!1,error:e instanceof Error?e.message:"Failed to delete round"}}}async function V(){try{let e=await (0,Y.UL)(),t=e.get("session_userId")?.value;if(!t)return{success:!1,rounds:[],error:"Not logged in"};let r=await l.z.liveRound.findMany({where:{players:{some:{playerId:t}}},orderBy:{createdAt:"desc"},select:{id:!0,name:!0,date:!0,createdAt:!0}});return{success:!0,rounds:r}}catch(e){return console.error("Failed to get user live rounds:",e),{success:!1,error:e instanceof Error?e.message:"Failed to get rounds",rounds:[]}}}(0,c.D)([J,V]),(0,n.A)(J,"4083c3adc94b0336e5535c15ea070d95939c5ac7db",null),(0,n.A)(V,"007aa0bbf7eeca6c75c03b2203a9e07da33e885c7e",null)},89643:(e,t,r)=>{Promise.resolve().then(r.bind(r,29555))},65667:(e,t,r)=>{Promise.resolve().then(r.bind(r,73637))},73637:(e,t,r)=>{"use strict";r.d(t,{default:()=>eC});var a=r(45512),n=r(58009),l=r(79334);r(25998);var s=r(94825);let o=(0,s.A)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);var i=r(9472);let d=(0,s.A)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),c=(0,s.A)("Bird",[["path",{d:"M16 7h.01",key:"1kdx03"}],["path",{d:"M3.4 18H12a8 8 0 0 0 8-8V7a4 4 0 0 0-7.28-2.3L2 20",key:"oj1oa8"}],["path",{d:"m20 7 2 .5-2 .5",key:"12nv4d"}],["path",{d:"M10 18v3",key:"1yea0a"}],["path",{d:"M14 17.75V21",key:"1pymcb"}],["path",{d:"M7 18a6 6 0 0 0 3.84-10.61",key:"1npnn0"}]]);var u=r(26248);let f=(0,u.createServerReference)("40ebac8213a49df5f28e787bd1324a82bf7c93118c",u.callServer,void 0,u.findSourceMapURL,"createPlayer");function p({allPlayers:e,selectedIds:t,playersInRound:r=[],onSelectionChange:l,isOpen:s,onClose:o,courseData:i,isAdmin:d=!1,frequentPlayerIds:c=[],currentUserId:u,hasMultipleGroups:p=!1}){let[h,x]=(0,n.useState)(t),[b,m]=(0,n.useState)(""),[g,y]=(0,n.useState)(e),[w,v]=(0,n.useState)(!1),[N,j]=(0,n.useState)(!1),[k,S]=(0,n.useState)(""),[C,P]=(0,n.useState)({firstName:"",lastName:"",email:"",phone:"",handicapIndex:""});if(!s)return null;let R=e=>{x(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},I=async()=>{if(S(""),!C.firstName||!C.lastName||!C.email||!C.phone){S("All fields (Name, Email, Phone) are required.");return}j(!0);try{let e=parseFloat(C.handicapIndex),t=await f({firstName:C.firstName,lastName:C.lastName,email:C.email,phone:C.phone,handicapIndex:isNaN(e)?0:e}),r={id:t.id,name:t.name,index:t.handicapIndex,preferred_tee_box:t.preferredTeeBox,phone:t.phone};y(e=>[...e,r]),x(e=>[...e,t.id]),v(!1),m(""),P({firstName:"",lastName:"",email:"",phone:"",handicapIndex:""})}catch(e){S(e.message||"Failed to create player.")}finally{j(!1)}},E=g.filter(e=>{if(!b)return!0;let t=b.toLowerCase(),r=e.phone?e.phone.slice(-4):"",a=e.player_id?e.player_id.toLowerCase():"";return e.name.toLowerCase().includes(t)||r.includes(t)||a.includes(t)}),M=[...E].sort((e,t)=>{if(u&&e.id===u)return -1;if(u&&t.id===u)return 1;let r=c?.includes(e.id),a=c?.includes(t.id);if(r&&!a)return -1;if(!r&&a)return 1;let n=e.name.split(" ").pop()||e.name,l=t.name.split(" ").pop()||t.name;return n.localeCompare(l)}),$=e=>{let t;return void 0!==e.index&&i&&(i.courseName.toLowerCase().includes("city park north")&&e.preferred_tee_box&&(t=i.teeBoxes.find(t=>e.preferred_tee_box&&t.name.toLowerCase().includes(e.preferred_tee_box.toLowerCase()))),!t&&i.roundTeeBox&&(t=i.teeBoxes.find(e=>e.rating===i.roundTeeBox.rating&&e.slope===i.roundTeeBox.slope)),t||(t=i.teeBoxes.find(e=>e.name.toLowerCase().includes("white"))||i.teeBoxes[0]),t)?Math.round(e.index*t.slope/113+(t.rating-i.par)):null};return(0,a.jsx)("div",{className:"fixed inset-0 z-[200] flex items-center justify-center bg-black/60 backdrop-blur-sm",children:(0,a.jsxs)("div",{className:"bg-white w-full h-full flex flex-col shadow-2xl overflow-hidden animate-in fade-in zoom-in duration-200",children:[(0,a.jsxs)("div",{className:"px-6 py-4 bg-white flex flex-col gap-2 shadow-sm z-10",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h2",{className:"text-[18pt] font-bold text-left",children:w?"Create New Player":"Select Players"}),!w&&(0,a.jsx)("button",{onClick:o,className:"px-4 py-2 bg-black text-white rounded-full text-[15pt] font-bold hover:bg-gray-800 transition-colors",children:"Close"})]}),!w&&(0,a.jsxs)("div",{className:"relative flex items-stretch gap-2",children:[(0,a.jsxs)("div",{className:"flex-1 relative",children:[(0,a.jsx)("input",{type:"text",placeholder:"Search by ID, Phone (last 4), Name (F-L)",title:"Search players",value:b,onChange:e=>m(e.target.value),className:"w-full text-[15pt] h-[58px] p-4 border-2 border-gray-300 rounded-xl focus:border-blue-500 focus:outline-none text-black bg-white shadow-sm transition-all"}),b&&E.length>0&&(0,a.jsx)("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border-2 border-gray-300 rounded-lg shadow-lg max-h-[400px] overflow-y-auto z-50",children:M.slice(0,20).map(e=>{let n=h.includes(e.id),l=r.includes(e.id),s=t.includes(e.id),o=!d&&l&&p&&!s;return(0,a.jsxs)("button",{onClick:()=>{o||R(e.id)},disabled:o,className:`w-full flex items-center gap-4 p-4 border-b border-gray-100 transition-colors text-left ${o?"bg-gray-100 opacity-60 cursor-not-allowed":n?"bg-blue-50 hover:bg-blue-100":"hover:bg-gray-50"}`,children:[(0,a.jsx)("div",{className:`w-7 h-7 shrink-0 rounded flex items-center justify-center border-2 ${o?"bg-gray-200 border-gray-300":n?"bg-blue-600 border-blue-600":"bg-white border-gray-300"}`,children:n&&(0,a.jsx)("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M5 13l4 4L19 7"})})}),(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:`text-[16pt] font-bold ${o?"text-gray-400":n?"text-blue-800":"text-gray-700"}`,children:e.name}),e.player_id&&(0,a.jsxs)("span",{className:`text-[14pt] font-semibold ${o?"text-gray-400":"text-gray-600"}`,children:["(",e.player_id,")"]}),l&&(0,a.jsx)("span",{className:`px-2 py-0.5 rounded text-[10pt] font-black uppercase tracking-wider ${o?"bg-gray-100 text-gray-500 border border-gray-200":"bg-green-100 text-green-700 border border-green-200"}`,children:o?"Claimed":"In Round"}),e.id===u&&(0,a.jsx)("span",{className:"px-2 py-0.5 rounded text-[10pt] font-black uppercase tracking-wider bg-blue-100 text-blue-700 border border-blue-200",children:"YOU"}),(()=>{let t=$(e);return null!==t&&(0,a.jsxs)("span",{className:`text-[14pt] font-semibold ${o?"text-gray-400":"text-gray-600"}`,children:["(",t,")"]})})()]})})]},e.id)})})]}),(0,a.jsx)("button",{onClick:()=>v(!0),className:"bg-green-600 text-white font-black px-6 rounded-xl text-[14pt] shrink-0 hover:bg-green-700 transition-all shadow-md active:scale-95 h-[58px] flex items-center justify-center",children:"+ New"})]})]}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto p-6 bg-slate-50",children:w?(0,a.jsxs)("div",{className:"max-w-lg mx-auto bg-white p-6 rounded-xl shadow-sm border border-gray-200 space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"First Name"}),(0,a.jsx)("input",{type:"text",title:"First Name",className:"w-full border-2 border-gray-300 p-3 rounded-lg text-lg text-black bg-white",value:C.firstName,onChange:e=>P({...C,firstName:e.target.value})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Last Name"}),(0,a.jsx)("input",{type:"text",title:"Last Name",className:"w-full border-2 border-gray-300 p-3 rounded-lg text-lg text-black bg-white",value:C.lastName,onChange:e=>P({...C,lastName:e.target.value})})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Email"}),(0,a.jsx)("input",{type:"email",title:"Email Address",className:"w-full border-2 border-gray-300 p-3 rounded-lg text-lg text-black bg-white",value:C.email,onChange:e=>P({...C,email:e.target.value})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Mobile Phone (Use for ID)"}),(0,a.jsx)("input",{type:"tel",title:"Mobile Phone",className:"w-full border-2 border-gray-300 p-3 rounded-lg text-lg text-black bg-white",value:C.phone,onChange:e=>P({...C,phone:e.target.value})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Handicap Index (Optional)"}),(0,a.jsx)("input",{type:"number",step:"0.1",title:"Handicap Index",className:"w-full border-2 border-gray-300 p-3 rounded-lg text-lg text-black bg-white",value:C.handicapIndex,onChange:e=>P({...C,handicapIndex:e.target.value}),placeholder:"0.0"})]}),k&&(0,a.jsx)("div",{className:"text-red-600 font-bold bg-red-50 p-3 rounded-lg text-center",children:k}),(0,a.jsxs)("div",{className:"flex gap-4 pt-4",children:[(0,a.jsx)("button",{onClick:()=>{v(!1),S("")},className:"flex-1 bg-gray-200 text-gray-800 font-bold py-3 rounded-lg text-xl",disabled:N,children:"Cancel"}),(0,a.jsx)("button",{onClick:I,disabled:N,className:"flex-1 bg-black text-white font-bold py-3 rounded-lg text-xl disabled:opacity-50",children:N?"Creating...":"Create Player"})]})]}):(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[0===M.length&&(0,a.jsxs)("div",{className:"col-span-full text-center py-10 text-gray-500",children:[(0,a.jsx)("div",{className:"text-[20pt] mb-2",children:"No players found"}),(0,a.jsx)("div",{children:"Try a different search or create a new player."}),(0,a.jsx)("button",{onClick:()=>v(!0),className:"mt-6 bg-green-600 text-white font-bold px-6 py-3 rounded-full text-lg shadow-md",children:"Create New Player"})]}),M.map(e=>{let n=h.includes(e.id),l=r.includes(e.id),s=t.includes(e.id),o=!d&&l&&p&&!s;return(0,a.jsxs)("button",{onClick:()=>R(e.id),disabled:o,className:`flex items-center gap-4 p-4 rounded-xl border-2 transition-all text-left ${o?"border-gray-200 bg-gray-100 opacity-60 cursor-not-allowed":n?"border-blue-500 bg-blue-50 shadow-sm cursor-pointer":"border-gray-100 bg-white hover:border-gray-200 cursor-pointer"}`,children:[(0,a.jsx)("div",{className:`w-7 h-7 shrink-0 rounded flex items-center justify-center border-2 transition-colors ${o?"bg-gray-200 border-gray-300":n?"bg-blue-600 border-blue-600":"bg-white border-gray-300"}`,children:n&&(0,a.jsx)("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M5 13l4 4L19 7"})})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:`text-[18pt] font-bold ${o?"text-gray-400":n?"text-blue-800":"text-gray-700"}`,children:e.name}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[l&&(0,a.jsx)("span",{className:`px-2 py-0.5 rounded text-[10pt] font-bold uppercase tracking-wider ${o?"bg-gray-200 text-gray-400":"bg-green-100 text-green-700"}`,children:o?"Claimed":"In My Group"}),(()=>{let t=$(e);return null!==t&&(0,a.jsxs)("span",{className:`text-[14pt] font-semibold ${o?"text-gray-400":"text-gray-600"}`,children:["(",t,")"]})})(),e.preferred_tee_box&&(0,a.jsx)("span",{className:`px-2 py-0.5 rounded text-[12pt] font-bold ${o?"bg-gray-200 text-gray-400":e.preferred_tee_box.toLowerCase().includes("white")?"bg-white text-black border border-black":e.preferred_tee_box.toLowerCase().includes("gold")?"bg-yellow-400 text-black":"bg-gray-300 text-gray-700"}`,children:e.preferred_tee_box.toLowerCase().includes("white")?"W":e.preferred_tee_box.toLowerCase().includes("gold")?"G":e.preferred_tee_box.charAt(0).toUpperCase()})]})]}),o&&(0,a.jsx)("div",{className:"text-[11pt] text-gray-500 italic mt-0.5",children:"Scored by another device."})]})]},e.id)})]})}),!w&&(0,a.jsxs)("div",{className:"px-4 py-5 bg-gray-50 border-t border-gray-100 flex justify-end gap-3 z-10",children:[(0,a.jsx)("button",{onClick:o,className:"px-4 py-2 rounded-full text-[15pt] font-bold text-gray-600 hover:bg-gray-200 transition-colors",children:"Cancel"}),(0,a.jsxs)("button",{onClick:()=>{l(h),o()},className:"bg-black text-white px-4 py-2 rounded-full text-[15pt] font-bold shadow-lg transition-all active:scale-95",children:["Save (",h.length,")"]})]})]})})}let h=(0,u.createServerReference)("400e89222081663f9862611ade692d927c3f98cb82",u.callServer,void 0,u.findSourceMapURL,"updateLiveRound"),x=(0,u.createServerReference)("4016392dec2572395a2778fdc23e0642bc0f58bbe6",u.callServer,void 0,u.findSourceMapURL,"createLiveRound"),b=(0,u.createServerReference)("40f07dc4568ad5deba38798d20db8aed003a3c9dfa",u.callServer,void 0,u.findSourceMapURL,"addPlayerToLiveRound");function m({isOpen:e,onClose:t,courseId:r,existingRound:s,allCourses:o=[],showAlert:i,defaultTeeBoxId:d,currentUserId:c}){let u=(0,l.useRouter)(),f=new Date,p=f.getTimezoneOffset(),m=new Date(f.getTime()-6e4*p).toISOString().split("T")[0],[g,y]=(0,n.useState)(""),[w,v]=(0,n.useState)(m),[N,j]=(0,n.useState)(68),[k,S]=(0,n.useState)(63.8),[C,P]=(0,n.useState)(100),[R,I]=(0,n.useState)(""),[E,M]=(0,n.useState)(""),[$,_]=(0,n.useState)(!1);if(!e)return null;let z=async()=>{let e=isNaN(N)?s?.par||68:N,a=isNaN(k)?s?.rating||63.8:k,n=isNaN(C)?s?.slope||100:C;_(!0);try{if(s){let l=await h({id:s.id,name:g||"Live Round",date:w||m,courseId:R||r,par:e,rating:a,slope:n});l.success?(t(),u.push(`/live?roundId=${s.id}`,{scroll:!1}),u.refresh()):(i("Error","Save Failed: "+l.error),_(!1))}else{let l=R||r;if(!l){i("Error","No Course ID selected."),_(!1);return}let s=await x({name:g||"Live Round",date:w||m,courseId:l,courseName:o.find(e=>e.id===l)?.name||"Unknown Course",par:e,rating:a,slope:n});if(s.success&&s.liveRoundId){if(c){E||R&&o.find(e=>e.id===(R||r))?.teeBoxes.find(e=>e.id===E)?.id;let e=E;if(!e){let t=o.find(e=>e.id===(R||r)),a=t?.teeBoxes.find(e=>e.name.toLowerCase().includes("white")),n=d?t?.teeBoxes.find(e=>e.id===d):null;e=n?.id||a?.id||t?.teeBoxes[0]?.id}if(e){await b({liveRoundId:s.liveRoundId,playerId:c,teeBoxId:e});let t=localStorage.getItem(`live_scoring_my_group_${s.liveRoundId}`),r=t?JSON.parse(t):[];r.includes(c)||(r.push(c),localStorage.setItem(`live_scoring_my_group_${s.liveRoundId}`,JSON.stringify(r)))}}t(),u.push(`/live?roundId=${s.liveRoundId}`,{scroll:!1}),u.refresh()}else i("Error","Creation Failed: "+(s.error||"Server Error")),_(!1)}}catch(e){console.error("CRASH:",e),i("Error","A critical error occurred. Please refresh."),_(!1)}};return(0,a.jsx)("div",{className:"fixed inset-0 z-[200] flex items-center justify-center bg-black/60 backdrop-blur-sm px-4",children:(0,a.jsxs)("div",{className:"bg-white w-full max-w-md rounded-2xl shadow-2xl overflow-hidden animate-in fade-in zoom-in duration-200",children:[(0,a.jsxs)("div",{className:"px-6 py-4 bg-black text-white flex justify-between items-center",children:[(0,a.jsx)("h2",{className:"text-[18pt] font-bold text-left ml-3",children:s?"Edit Live Round":"New Live Round"}),(0,a.jsx)("button",{onClick:t,className:"hover:opacity-70 transition-opacity bg-white text-black text-[15pt] font-bold px-4 py-2 rounded-full",children:"Close"})]}),(0,a.jsxs)("div",{className:"p-6 space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-[12pt] font-bold text-gray-700 mb-1",children:"Date"}),(0,a.jsx)("input",{type:"date",value:w,onChange:e=>v(e.target.value),disabled:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg text-[14pt] outline-none text-black bg-gray-100 cursor-not-allowed"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-[12pt] font-bold text-gray-700 mb-1",children:"Course"}),(0,a.jsxs)("select",{value:R,onChange:e=>{let t=e.target.value;I(t),M("");let r=o.find(e=>e.id===t);if(r){y(r.name);let e=r.teeBoxes.find(e=>e.name.toLowerCase().includes("white"))||r.teeBoxes[0];e&&(M(e.id),S(e.rating),P(e.slope)),r.holes?.length&&j(r.holes.reduce((e,t)=>e+t.par,0))}},className:"w-full px-4 py-2 border border-gray-300 rounded-lg text-[14pt] focus:ring-2 focus:ring-black outline-none text-black bg-white",children:[(0,a.jsx)("option",{value:"",disabled:!0,children:"-- Select Course --"}),o?.map(e=>a.jsx("option",{value:e.id,children:e.name},e.id))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-[12pt] font-bold text-gray-700 mb-1",children:"Select Tee Box (Auto-fill)"}),(0,a.jsxs)("select",{value:E,onChange:e=>{let t=e.target.value;M(t);let r=o.find(e=>e.id===R);if(r){let e=r.teeBoxes.find(e=>e.id===t);e&&(S(e.rating),P(e.slope),j(r.holes.reduce((e,t)=>e+t.par,0)||N))}},className:"w-full px-4 py-2 border border-gray-300 rounded-lg text-[14pt] focus:ring-2 focus:ring-black outline-none text-black bg-white",children:[(0,a.jsx)("option",{value:"",disabled:!0,children:"-- Select Tee Box --"}),o.find(e=>e.id===R)?.teeBoxes.map(e=>a.jsxs("option",{value:e.id,children:[e.name," (R: ",e.rating," / S: ",e.slope,")"]},e.id))]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-[12pt] font-bold text-gray-700 mb-1",children:"Par"}),(0,a.jsx)("input",{type:"number",value:N,onChange:e=>j(parseInt(e.target.value)),className:"w-full px-4 py-2 border border-gray-300 rounded-lg text-[14pt] focus:ring-2 focus:ring-black outline-none text-black bg-white"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-[12pt] font-bold text-gray-700 mb-1",children:"Rating"}),(0,a.jsx)("input",{type:"number",step:"0.1",value:k,onChange:e=>S(parseFloat(e.target.value)),className:"w-full px-4 py-2 border border-gray-300 rounded-lg text-[14pt] focus:ring-2 focus:ring-black outline-none text-black bg-white"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-[12pt] font-bold text-gray-700 mb-1",children:"Slope"}),(0,a.jsx)("input",{type:"number",value:C,onChange:e=>P(parseInt(e.target.value)),className:"w-full px-4 py-2 border border-gray-300 rounded-lg text-[14pt] focus:ring-2 focus:ring-black outline-none text-black bg-white"})]})]})]}),(0,a.jsxs)("div",{className:"px-6 py-4 bg-gray-50 flex justify-end gap-3 mt-2",children:[(0,a.jsx)("button",{onClick:t,disabled:$,className:"px-4 py-2 rounded-full text-[15pt] font-bold text-gray-600 hover:bg-gray-200 transition-colors",children:"Cancel"}),(0,a.jsx)("button",{onClick:z,disabled:$,className:"bg-black text-white px-4 py-2 rounded-full text-[15pt] font-bold shadow-lg hover:bg-gray-800 disabled:opacity-50 flex items-center gap-2 cursor-pointer",children:$?"Saving...":"Save Round"})]})]})})}function g({isOpen:e,title:t,message:r,confirmText:n="Confirm",cancelText:l="Cancel",onConfirm:s,onCancel:o,isDestructive:i=!1,hideCancel:d=!1}){return e?(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[250] p-4 backdrop-blur-sm",children:(0,a.jsx)("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-sm overflow-hidden transform transition-all scale-100",children:(0,a.jsxs)("div",{className:"p-6 text-center",children:[(0,a.jsx)("h3",{className:"text-xl font-black text-gray-900 mb-2",children:t}),(0,a.jsx)("p",{className:"text-[14pt] text-gray-600 mb-8 leading-relaxed",children:r}),(0,a.jsxs)("div",{className:"flex gap-3 justify-center",children:[!d&&(0,a.jsx)("button",{onClick:o,className:"flex-1 px-4 py-3 bg-gray-100 text-gray-700 text-[14pt] font-bold rounded-xl hover:bg-gray-200 transition-colors active:scale-95",children:l}),(0,a.jsx)("button",{onClick:s,className:`flex-1 px-4 py-3 text-white text-[14pt] font-bold rounded-xl transition-colors shadow-lg active:scale-95 ${i?"bg-red-600 hover:bg-red-700":"bg-black hover:bg-gray-800"}`,children:n})]})]})})}):null}function y({isOpen:e,onClose:t,onAdd:r,onUpdate:l,onDelete:s,roundData:o,editingGuest:i}){let[d,c]=(0,n.useState)(""),[u,f]=(0,n.useState)(""),[p,h]=(0,n.useState)(""),[x,b]=(0,n.useState)(!1),[m,y]=(0,n.useState)(null);return e?(0,a.jsxs)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:[(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-6 text-gray-800",children:i?"Edit Guest Player":"Add Guest Player"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Name"}),(0,a.jsx)("input",{type:"text",value:d,onChange:e=>c(e.target.value),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none text-lg text-black bg-white",placeholder:"Guest Name"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Handicap Index"}),(0,a.jsx)("input",{type:"number",step:"0.1",value:u,onChange:e=>f(e.target.value),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none text-lg text-black bg-white [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none",placeholder:"0.0"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Course Handicap ",o&&!i&&!x&&(0,a.jsx)("span",{className:"text-xs text-gray-500",children:"(Auto-calculated)"})]}),(0,a.jsx)("input",{type:"number",value:p,onChange:e=>{h(e.target.value),b(!0)},className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none text-lg text-black bg-white [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none",placeholder:"0"}),o&&!i&&(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Based on Rating: ",o.rating,", Slope: ",o.slope,", Par: ",o.par]})]})]}),(0,a.jsxs)("div",{className:"flex gap-3 mt-6",children:[i&&(0,a.jsx)("button",{onClick:()=>{if("cpgc-Delete"!==prompt("Enter password to delete:")){alert("Incorrect password.");return}y({isOpen:!0,title:"Delete Guest Player",message:"Are you sure you want to delete this guest player?",isDestructive:!0,onConfirm:()=>{y(null),s&&i&&s(i.id)}})},className:"px-4 py-2 bg-red-600 text-white rounded-lg font-bold hover:bg-red-700 transition-all text-[15pt]",children:"Delete"}),(0,a.jsx)("button",{onClick:t,className:"flex-1 px-4 py-2 bg-gray-200 text-gray-800 rounded-lg font-bold hover:bg-gray-300 transition-all text-[15pt]",children:"Cancel"}),(0,a.jsx)("button",{onClick:()=>{if(!d.trim()){alert("Please enter a name");return}let e={name:d.trim(),index:parseFloat(u)||0,courseHandicap:parseInt(p)||0};i&&l?l(i.id,e):r(e),c(""),f(""),h(""),t()},className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg font-bold hover:bg-blue-700 transition-all text-[15pt]",children:i?"Update Guest":"Add Guest"})]})]}),m&&(0,a.jsx)(g,{isOpen:m.isOpen,title:m.title,message:m.message,isDestructive:m.isDestructive,onConfirm:m.onConfirm,onCancel:()=>y(null)})]}):null}function w({isOpen:e,onClose:t,players:r,liveRoundId:l,onSave:s}){let[o,i]=(0,n.useState)(new Set),[d,c]=(0,n.useState)(!1);if(!e)return null;let u=r.filter(e=>!e.isGuest),f=e=>{let t=new Set(o);t.has(e)?t.delete(e):t.add(e),i(t)},p=async()=>{if(0===o.size){alert("Please select at least one player");return}c(!0);try{let e=Array.from(o).map(e=>{let t=u.find(t=>t.id===e);return t?.liveRoundPlayerId||e});await s(e),i(new Set),t()}catch(e){console.error("Failed to save:",e)}finally{c(!1)}},h=e=>{let t=e.trim().split(" ");if(1===t.length)return{first:t[0],last:""};let r=t[t.length-1];return{first:t.slice(0,-1).join(" "),last:r}};return(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col",children:[(0,a.jsxs)("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 p-4 rounded-t-xl",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h2",{className:"text-[18pt] font-bold text-white text-left ml-3",children:"Add to Club Scores"}),(0,a.jsx)("button",{onClick:t,className:"bg-white/20 hover:bg-white/30 text-white rounded-lg px-4 py-2 transition-colors font-bold text-[15pt]",children:"Close"})]}),(0,a.jsx)("p",{className:"text-white/90 text-[12pt] mt-1",children:"Select players to copy their scores to the main club scores page"})]}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto p-4",children:0===u.length?(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,a.jsx)("p",{className:"text-[14pt]",children:"No eligible players found"}),(0,a.jsx)("p",{className:"text-[12pt] mt-2",children:"Guest players cannot be added to club scores"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"mb-4 pb-3 border-b-2 border-gray-200",children:(0,a.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer hover:bg-gray-50 p-3 rounded-lg transition-colors",children:[(0,a.jsx)("input",{type:"checkbox",checked:o.size===u.length,onChange:()=>{0!==u.length&&(o.size===u.length&&u.length>0?i(new Set):i(new Set(u.map(e=>e.id))))},className:"w-6 h-6 rounded border-2 border-gray-300 text-blue-600 focus:ring-2 focus:ring-blue-500"}),(0,a.jsxs)("span",{className:"font-bold text-[16pt] text-gray-900",children:["Select All (",u.length,")"]})]})}),(0,a.jsx)("div",{className:"space-y-2",children:u.map(e=>{let{first:t,last:r}=h(e.name),n=o.has(e.id);return(0,a.jsxs)("label",{className:`flex items-center gap-3 cursor-pointer p-3 rounded-lg transition-all ${n?"bg-blue-50 border-2 border-blue-500":"bg-gray-50 border-2 border-transparent hover:bg-gray-100"}`,children:[(0,a.jsx)("input",{type:"checkbox",checked:n,onChange:()=>f(e.id),className:"w-6 h-6 rounded border-2 border-gray-300 text-blue-600 focus:ring-2 focus:ring-blue-500"}),(0,a.jsxs)("div",{className:"flex-1 flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"font-bold text-[16pt] text-gray-900",children:[t," ",(0,a.jsx)("span",{className:"font-normal",children:r})]}),(0,a.jsxs)("div",{className:"text-[12pt] text-gray-600",children:["Thru: ",e.thru," holes"]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("div",{className:"text-[14pt] font-bold text-gray-900",children:["Gross: ",e.totalGross||"-"]}),(0,a.jsxs)("div",{className:"text-[12pt] text-gray-600",children:["Net: ",e.totalNet||"-"]})]})]})]},e.id)})})]})}),(0,a.jsx)("div",{className:"border-t-2 border-gray-200 p-4 bg-gray-50 rounded-b-xl",children:(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("button",{onClick:t,className:"flex-1 bg-gray-300 hover:bg-gray-400 text-gray-900 font-bold px-4 py-2 rounded-full text-[15pt] transition-colors",children:"Cancel"}),(0,a.jsx)("button",{onClick:p,disabled:0===o.size||d,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white font-bold px-4 py-2 rounded-full text-[15pt] transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed",children:d?"Saving...":`Save to Club (${o.size})`})]})})]})})}var v=r(51255);let N={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function j(e){return (t={})=>{let r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}let k={date:j({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:j({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:j({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},S={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function C(e){return(t,r)=>{let a;if("formatting"===(r?.context?String(r.context):"standalone")&&e.formattingValues){let t=e.defaultFormattingWidth||e.defaultWidth,n=r?.width?String(r.width):t;a=e.formattingValues[n]||e.formattingValues[t]}else{let t=e.defaultWidth,n=r?.width?String(r.width):e.defaultWidth;a=e.values[n]||e.values[t]}return a[e.argumentCallback?e.argumentCallback(t):t]}}function P(e){return(t,r={})=>{let a;let n=r.width,l=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],s=t.match(l);if(!s)return null;let o=s[0],i=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],d=Array.isArray(i)?function(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}(i,e=>e.test(o)):function(e,t){for(let r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}(i,e=>e.test(o));return a=e.valueCallback?e.valueCallback(d):d,{value:a=r.valueCallback?r.valueCallback(a):a,rest:t.slice(o.length)}}}let R={code:"en-US",formatDistance:(e,t,r)=>{let a;let n=N[e];return(a="string"==typeof n?n:1===t?n.one:n.other.replace("{{count}}",t.toString()),r?.addSuffix)?r.comparison&&r.comparison>0?"in "+a:a+" ago":a},formatLong:k,formatRelative:(e,t,r,a)=>S[e],localize:{ordinalNumber:(e,t)=>{let r=Number(e),a=r%100;if(a>20||a<10)switch(a%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},era:C({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:C({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:C({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:C({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:C({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:function(e){return(t,r={})=>{let a=t.match(e.matchPattern);if(!a)return null;let n=a[0],l=t.match(e.parsePattern);if(!l)return null;let s=e.valueCallback?e.valueCallback(l[0]):l[0];return{value:s=r.valueCallback?r.valueCallback(s):s,rest:t.slice(n.length)}}}({matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)}),era:P({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:P({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:P({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:P({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:P({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}},I={},E=Symbol.for("constructDateFrom");function M(e,t){return"function"==typeof e?e(t):e&&"object"==typeof e&&E in e?e[E](t):e instanceof Date?new e.constructor(t):new Date(t)}function $(e,t){return M(t||e,e)}function _(e){let t=$(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function z(e,t){let r=$(e,t?.in);return r.setHours(0,0,0,0),r}function T(e,t){let r=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??I.weekStartsOn??I.locale?.options?.weekStartsOn??0,a=$(e,t?.in),n=a.getDay();return a.setDate(a.getDate()-((n<r?7:0)+n-r)),a.setHours(0,0,0,0),a}function F(e,t){return T(e,{...t,weekStartsOn:1})}function D(e,t){let r=$(e,t?.in),a=r.getFullYear(),n=M(r,0);n.setFullYear(a+1,0,4),n.setHours(0,0,0,0);let l=F(n),s=M(r,0);s.setFullYear(a,0,4),s.setHours(0,0,0,0);let o=F(s);return r.getTime()>=l.getTime()?a+1:r.getTime()>=o.getTime()?a:a-1}function A(e,t){let r=$(e,t?.in),a=r.getFullYear(),n=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??I.firstWeekContainsDate??I.locale?.options?.firstWeekContainsDate??1,l=M(t?.in||e,0);l.setFullYear(a+1,0,n),l.setHours(0,0,0,0);let s=T(l,t),o=M(t?.in||e,0);o.setFullYear(a,0,n),o.setHours(0,0,0,0);let i=T(o,t);return+r>=+s?a+1:+r>=+i?a:a-1}function B(e,t){let r=Math.abs(e).toString().padStart(t,"0");return(e<0?"-":"")+r}let L={y(e,t){let r=e.getFullYear(),a=r>0?r:1-r;return B("yy"===t?a%100:a,t.length)},M(e,t){let r=e.getMonth();return"M"===t?String(r+1):B(r+1,2)},d:(e,t)=>B(e.getDate(),t.length),a(e,t){let r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];default:return"am"===r?"a.m.":"p.m."}},h:(e,t)=>B(e.getHours()%12||12,t.length),H:(e,t)=>B(e.getHours(),t.length),m:(e,t)=>B(e.getMinutes(),t.length),s:(e,t)=>B(e.getSeconds(),t.length),S(e,t){let r=t.length;return B(Math.trunc(e.getMilliseconds()*Math.pow(10,r-3)),t.length)}},O={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},U={G:function(e,t,r){let a=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(a,{width:"abbreviated"});case"GGGGG":return r.era(a,{width:"narrow"});default:return r.era(a,{width:"wide"})}},y:function(e,t,r){if("yo"===t){let t=e.getFullYear();return r.ordinalNumber(t>0?t:1-t,{unit:"year"})}return L.y(e,t)},Y:function(e,t,r,a){let n=A(e,a),l=n>0?n:1-n;return"YY"===t?B(l%100,2):"Yo"===t?r.ordinalNumber(l,{unit:"year"}):B(l,t.length)},R:function(e,t){return B(D(e),t.length)},u:function(e,t){return B(e.getFullYear(),t.length)},Q:function(e,t,r){let a=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(a);case"QQ":return B(a,2);case"Qo":return r.ordinalNumber(a,{unit:"quarter"});case"QQQ":return r.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(a,{width:"narrow",context:"formatting"});default:return r.quarter(a,{width:"wide",context:"formatting"})}},q:function(e,t,r){let a=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(a);case"qq":return B(a,2);case"qo":return r.ordinalNumber(a,{unit:"quarter"});case"qqq":return r.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(a,{width:"narrow",context:"standalone"});default:return r.quarter(a,{width:"wide",context:"standalone"})}},M:function(e,t,r){let a=e.getMonth();switch(t){case"M":case"MM":return L.M(e,t);case"Mo":return r.ordinalNumber(a+1,{unit:"month"});case"MMM":return r.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(a,{width:"narrow",context:"formatting"});default:return r.month(a,{width:"wide",context:"formatting"})}},L:function(e,t,r){let a=e.getMonth();switch(t){case"L":return String(a+1);case"LL":return B(a+1,2);case"Lo":return r.ordinalNumber(a+1,{unit:"month"});case"LLL":return r.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(a,{width:"narrow",context:"standalone"});default:return r.month(a,{width:"wide",context:"standalone"})}},w:function(e,t,r,a){let n=function(e,t){let r=$(e,t?.in);return Math.round((+T(r,t)-+function(e,t){let r=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??I.firstWeekContainsDate??I.locale?.options?.firstWeekContainsDate??1,a=A(e,t),n=M(t?.in||e,0);return n.setFullYear(a,0,r),n.setHours(0,0,0,0),T(n,t)}(r,t))/6048e5)+1}(e,a);return"wo"===t?r.ordinalNumber(n,{unit:"week"}):B(n,t.length)},I:function(e,t,r){let a=function(e,t){let r=$(e,void 0);return Math.round((+F(r)-+function(e,t){let r=D(e,void 0),a=M(e,0);return a.setFullYear(r,0,4),a.setHours(0,0,0,0),F(a)}(r))/6048e5)+1}(e);return"Io"===t?r.ordinalNumber(a,{unit:"week"}):B(a,t.length)},d:function(e,t,r){return"do"===t?r.ordinalNumber(e.getDate(),{unit:"date"}):L.d(e,t)},D:function(e,t,r){let a=function(e,t){let r=$(e,void 0);return function(e,t,r){let[a,n]=function(e,...t){let r=M.bind(null,e||t.find(e=>"object"==typeof e));return t.map(r)}(void 0,e,t),l=z(a),s=z(n);return Math.round((+l-_(l)-(+s-_(s)))/864e5)}(r,function(e,t){let r=$(e,void 0);return r.setFullYear(r.getFullYear(),0,1),r.setHours(0,0,0,0),r}(r))+1}(e);return"Do"===t?r.ordinalNumber(a,{unit:"dayOfYear"}):B(a,t.length)},E:function(e,t,r){let a=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(a,{width:"short",context:"formatting"});default:return r.day(a,{width:"wide",context:"formatting"})}},e:function(e,t,r,a){let n=e.getDay(),l=(n-a.weekStartsOn+8)%7||7;switch(t){case"e":return String(l);case"ee":return B(l,2);case"eo":return r.ordinalNumber(l,{unit:"day"});case"eee":return r.day(n,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(n,{width:"short",context:"formatting"});default:return r.day(n,{width:"wide",context:"formatting"})}},c:function(e,t,r,a){let n=e.getDay(),l=(n-a.weekStartsOn+8)%7||7;switch(t){case"c":return String(l);case"cc":return B(l,t.length);case"co":return r.ordinalNumber(l,{unit:"day"});case"ccc":return r.day(n,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(n,{width:"narrow",context:"standalone"});case"cccccc":return r.day(n,{width:"short",context:"standalone"});default:return r.day(n,{width:"wide",context:"standalone"})}},i:function(e,t,r){let a=e.getDay(),n=0===a?7:a;switch(t){case"i":return String(n);case"ii":return B(n,t.length);case"io":return r.ordinalNumber(n,{unit:"day"});case"iii":return r.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(a,{width:"short",context:"formatting"});default:return r.day(a,{width:"wide",context:"formatting"})}},a:function(e,t,r){let a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(a,{width:"narrow",context:"formatting"});default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,r){let a;let n=e.getHours();switch(a=12===n?O.noon:0===n?O.midnight:n/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,r){let a;let n=e.getHours();switch(a=n>=17?O.evening:n>=12?O.afternoon:n>=4?O.morning:O.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,r){if("ho"===t){let t=e.getHours()%12;return 0===t&&(t=12),r.ordinalNumber(t,{unit:"hour"})}return L.h(e,t)},H:function(e,t,r){return"Ho"===t?r.ordinalNumber(e.getHours(),{unit:"hour"}):L.H(e,t)},K:function(e,t,r){let a=e.getHours()%12;return"Ko"===t?r.ordinalNumber(a,{unit:"hour"}):B(a,t.length)},k:function(e,t,r){let a=e.getHours();return(0===a&&(a=24),"ko"===t)?r.ordinalNumber(a,{unit:"hour"}):B(a,t.length)},m:function(e,t,r){return"mo"===t?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):L.m(e,t)},s:function(e,t,r){return"so"===t?r.ordinalNumber(e.getSeconds(),{unit:"second"}):L.s(e,t)},S:function(e,t){return L.S(e,t)},X:function(e,t,r){let a=e.getTimezoneOffset();if(0===a)return"Z";switch(t){case"X":return W(a);case"XXXX":case"XX":return G(a);default:return G(a,":")}},x:function(e,t,r){let a=e.getTimezoneOffset();switch(t){case"x":return W(a);case"xxxx":case"xx":return G(a);default:return G(a,":")}},O:function(e,t,r){let a=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+H(a,":");default:return"GMT"+G(a,":")}},z:function(e,t,r){let a=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+H(a,":");default:return"GMT"+G(a,":")}},t:function(e,t,r){return B(Math.trunc(+e/1e3),t.length)},T:function(e,t,r){return B(+e,t.length)}};function H(e,t=""){let r=e>0?"-":"+",a=Math.abs(e),n=Math.trunc(a/60),l=a%60;return 0===l?r+String(n):r+String(n)+t+B(l,2)}function W(e,t){return e%60==0?(e>0?"-":"+")+B(Math.abs(e)/60,2):G(e,t)}function G(e,t=""){let r=Math.abs(e);return(e>0?"-":"+")+B(Math.trunc(r/60),2)+t+B(r%60,2)}let q=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},Y=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},J={p:Y,P:(e,t)=>{let r;let a=e.match(/(P+)(p+)?/)||[],n=a[1],l=a[2];if(!l)return q(e,t);switch(n){case"P":r=t.dateTime({width:"short"});break;case"PP":r=t.dateTime({width:"medium"});break;case"PPP":r=t.dateTime({width:"long"});break;default:r=t.dateTime({width:"full"})}return r.replace("{{date}}",q(n,t)).replace("{{time}}",Y(l,t))}},V=/^D+$/,Q=/^Y+$/,X=["D","DD","YY","YYYY"],K=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Z=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,ee=/^'([^]*?)'?$/,et=/''/g,er=/[a-zA-Z]/;function ea(e,t,r){let a=r?.locale??I.locale??R,n=r?.firstWeekContainsDate??r?.locale?.options?.firstWeekContainsDate??I.firstWeekContainsDate??I.locale?.options?.firstWeekContainsDate??1,l=r?.weekStartsOn??r?.locale?.options?.weekStartsOn??I.weekStartsOn??I.locale?.options?.weekStartsOn??0,s=$(e,r?.in);if(!(s instanceof Date||"object"==typeof s&&"[object Date]"===Object.prototype.toString.call(s))&&"number"!=typeof s||isNaN(+$(s)))throw RangeError("Invalid time value");let o=t.match(Z).map(e=>{let t=e[0];return"p"===t||"P"===t?(0,J[t])(e,a.formatLong):e}).join("").match(K).map(e=>{if("''"===e)return{isToken:!1,value:"'"};let t=e[0];if("'"===t)return{isToken:!1,value:function(e){let t=e.match(ee);return t?t[1].replace(et,"'"):e}(e)};if(U[t])return{isToken:!0,value:e};if(t.match(er))throw RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return{isToken:!1,value:e}});a.localize.preprocessor&&(o=a.localize.preprocessor(s,o));let i={firstWeekContainsDate:n,weekStartsOn:l,locale:a};return o.map(n=>{if(!n.isToken)return n.value;let l=n.value;return(!r?.useAdditionalWeekYearTokens&&Q.test(l)||!r?.useAdditionalDayOfYearTokens&&V.test(l))&&function(e,t,r){let a=function(e,t,r){let a="Y"===e[0]?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${a} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}(e,t,r);if(console.warn(a),X.includes(e))throw RangeError(a)}(l,t,String(e)),(0,U[l[0]])(s,l,a.localize,i)}).join("")}function en({data:e,isOpen:t,onClose:r}){if(!t)return null;let{player:n,round:l,teeBox:s,scores:o}=e,i=l.course,d=new Map;o.forEach(e=>d.set(e.hole.holeNumber,e.strokes));let c=i.holes.filter(e=>e.holeNumber<=9),u=i.holes.filter(e=>e.holeNumber>9),f=(e,t)=>e.reduce((e,r)=>"par"===t?e+r.par:e+(d.get(r.holeNumber)||0),0),p=f(c,"par"),h=f(c,"score"),x=f(u,"par"),b=f(u,"score"),m=h+b,g=s?.slope||113,y=i.holes.reduce((e,t)=>e+t.par,0),w=s?.rating||y,v=Math.round(g/113*(e.player.handicapIndex??0)+(w-y)),N=(m||0)-v,j=(e,t)=>{if(!t)return"bg-transparent";let r=t-e;return r<=-2?"bg-yellow-300":-1===r?"bg-green-300":0===r?"bg-white text-black":1===r?"bg-orange-200":"bg-red-300"},k=({title:e,holes:t,totalLabel:r,totalPar:n,totalScore:l})=>(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h4",{className:"font-bold text-black mb-2 px-1 text-[14pt]",children:e}),(0,a.jsxs)("div",{className:"flex bg-white rounded-lg overflow-hidden border border-gray-100 shadow-sm",children:[(0,a.jsx)("div",{className:"flex-1 overflow-x-auto no-scrollbar",children:(0,a.jsx)("table",{className:"w-full text-center border-collapse min-w-[300px]",children:(0,a.jsxs)("tbody",{children:[(0,a.jsx)("tr",{className:"border-b border-gray-100",children:t.map(e=>(0,a.jsx)("td",{className:"px-1 py-2 w-10 font-bold text-[14pt] text-black",children:e.holeNumber},e.id))}),(0,a.jsx)("tr",{className:"border-b border-gray-100",children:t.map(e=>(0,a.jsx)("td",{className:"px-1 py-2 w-10 text-[14pt] text-gray-500",children:e.par},e.id))}),(0,a.jsx)("tr",{className:"border-b border-gray-100",children:t.map(e=>{let t=d.get(e.holeNumber);return(0,a.jsx)("td",{className:`px-1 py-2 w-10 font-black text-[14pt] ${j(e.par,t)}`,children:t||"-"},e.id)})}),(0,a.jsx)("tr",{children:t.map(e=>(0,a.jsx)("td",{className:"px-1 py-2 w-10 text-[14pt] text-gray-400",children:e.difficulty||"-"},e.id))})]})})}),(0,a.jsx)("div",{className:"w-16 bg-gray-100 border-l border-gray-200 shrink-0",children:(0,a.jsx)("table",{className:"w-full text-center border-collapse",children:(0,a.jsxs)("tbody",{children:[(0,a.jsx)("tr",{className:"border-b border-gray-100",children:(0,a.jsx)("td",{className:"px-1 py-2 text-[14pt] font-bold text-transparent",children:"\xa0"})}),(0,a.jsx)("tr",{className:"border-b border-gray-100",children:(0,a.jsx)("td",{className:"px-1 py-2 text-[14pt] font-bold text-gray-500",children:n})}),(0,a.jsx)("tr",{className:"border-b border-gray-100",children:(0,a.jsx)("td",{className:"px-1 py-2 text-[14pt] font-black text-black",children:l||"-"})}),(0,a.jsx)("tr",{children:(0,a.jsx)("td",{className:"px-1 py-2 text-[14pt] text-transparent",children:"\xa0"})})]})})})]})]});return(0,a.jsx)("div",{className:"fixed inset-0 z-[200] flex items-center justify-center bg-black/80 backdrop-blur-md animate-in fade-in duration-200",children:(0,a.jsxs)("div",{className:"bg-slate-50 w-full h-full flex flex-col overflow-hidden animate-in zoom-in-95 duration-200",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center p-3 bg-white border-b border-gray-100",children:[(0,a.jsx)("span",{className:"text-[14pt] font-bold text-gray-400 uppercase tracking-widest",children:"Scorecard"}),(0,a.jsx)("button",{onClick:r,className:"px-4 py-2 bg-black text-white rounded-full text-[15pt] font-bold hover:bg-gray-800 transition-colors mr-3",children:"Close"})]}),(0,a.jsxs)("div",{className:"overflow-y-auto px-1 pb-8 bg-slate-50",children:[(0,a.jsxs)("div",{className:"text-center mb-8 px-1",children:[(0,a.jsx)("h2",{className:"text-[14pt] font-black text-black tracking-tight flex items-center justify-center gap-2",children:n.name}),(0,a.jsxs)("div",{className:"flex justify-center items-center gap-3 mt-2 text-[14pt] text-gray-500 font-medium whitespace-nowrap overflow-x-auto no-scrollbar",children:[(0,a.jsx)("span",{children:ea(new Date(l.date),"MMMM d, yyyy")}),(0,a.jsx)("span",{className:"w-1 h-1 rounded-full bg-gray-300"}),(0,a.jsx)("span",{children:i.name})]}),(0,a.jsxs)("div",{className:"flex justify-center items-center gap-3 mt-1 text-[14pt] text-gray-600 font-medium whitespace-nowrap overflow-x-auto no-scrollbar",children:[(0,a.jsx)("span",{className:"text-blue-600",children:s?.name}),(0,a.jsx)("span",{className:"w-1 h-1 rounded-full bg-gray-300"}),(0,a.jsxs)("span",{children:["Par ",p+x]}),(0,a.jsx)("span",{className:"w-1 h-1 rounded-full bg-gray-300"}),(0,a.jsxs)("span",{children:["Rating ",s?.rating.toFixed(1)]}),(0,a.jsx)("span",{className:"w-1 h-1 rounded-full bg-gray-300"}),(0,a.jsxs)("span",{children:["Slope ",s?.slope]})]})]}),(0,a.jsx)(k,{title:"Front 9",holes:c,totalLabel:"OUT",totalPar:p,totalScore:h}),(0,a.jsx)(k,{title:"Back 9",holes:u,totalLabel:"IN",totalPar:x,totalScore:b}),(0,a.jsxs)("div",{className:"flex flex-wrap justify-center gap-3 mt-8",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,a.jsx)("span",{className:"w-3 h-3 bg-yellow-300 rounded-sm"}),(0,a.jsx)("span",{className:"text-[14pt] font-bold text-gray-500 uppercase",children:"Eagle (-2)"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,a.jsx)("span",{className:"w-3 h-3 bg-green-300 rounded-sm"}),(0,a.jsx)("span",{className:"text-[14pt] font-bold text-gray-500 uppercase",children:"Birdie (-1)"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,a.jsx)("span",{className:"w-3 h-3 bg-white border border-gray-300 rounded-sm"}),(0,a.jsx)("span",{className:"text-[14pt] font-bold text-gray-500 uppercase",children:"Par (E)"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,a.jsx)("span",{className:"w-3 h-3 bg-orange-200 rounded-sm"}),(0,a.jsx)("span",{className:"text-[14pt] font-bold text-gray-500 uppercase",children:"Bogey (+1)"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,a.jsx)("span",{className:"w-3 h-3 bg-red-300 rounded-sm"}),(0,a.jsx)("span",{className:"text-[14pt] font-bold text-gray-500 uppercase",children:"Double+ (+2)"})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-3 mt-8 flex justify-around items-center text-center",children:[(0,a.jsxs)("div",{className:"text-left",children:[(0,a.jsx)("span",{className:"text-[14pt] font-bold text-gray-400 uppercase tracking-wider block mb-1",children:"GRS"}),(0,a.jsx)("span",{className:"text-[14pt] font-black text-black",children:h>0||b>0?(0,a.jsxs)(a.Fragment,{children:[h," + ",b," = ",m]}):(0,a.jsx)(a.Fragment,{children:m||"-"})})]}),(0,a.jsx)("div",{className:"w-px h-10 bg-gray-100 mx-1"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-[14pt] font-bold text-gray-400 uppercase tracking-wider block mb-1",children:"HCP"}),(0,a.jsx)("span",{className:"text-[14pt] font-black text-black",children:v})]}),(0,a.jsx)("div",{className:"w-px h-10 bg-gray-100 mx-1"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-[14pt] font-bold text-gray-400 uppercase tracking-wider block mb-1",children:"NET"}),(0,a.jsx)("span",{className:"text-[14pt] font-black text-black",children:N||"-"})]})]})]})]})})}let el=(0,u.createServerReference)("40009ab4d750cb699b4e9b5e6b95e437c8cb7014de",u.callServer,void 0,u.findSourceMapURL,"getScorecardDetails"),es=(0,u.createServerReference)("60e722b8157152e37aaec2f21d2f11b8c1e362c168",u.callServer,void 0,u.findSourceMapURL,"saveRoundWinnings");function eo({roundId:e,payouts:t}){let[r,l]=(0,n.useState)(!1),[s,o]=(0,n.useState)(!1),[i,d]=(0,n.useState)(null);return s?(0,a.jsxs)("div",{className:"pt-4",children:[(0,a.jsx)("button",{onClick:()=>{d({isOpen:!0,title:"Save Winnings",message:"This will save these calculated winnings to the database. Continue?",isDestructive:!1,onConfirm:async()=>{d(null),l(!0);try{await es(e,t),alert("Winnings saved successfully!")}catch(e){console.error(e),alert("Failed to save winnings.")}finally{l(!1)}}})},disabled:r,className:"w-full bg-[#059669] hover:bg-[#047857] text-white font-bold px-1 py-2 rounded-full shadow-sm transition-colors text-[14pt] uppercase tracking-wider flex items-center justify-center gap-2 h-auto cursor-pointer disabled:opacity-50",children:r?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("svg",{className:"animate-spin h-6 w-6 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving..."]}):"Save Pool"}),i&&(0,a.jsx)(g,{isOpen:i.isOpen,title:i.title,message:i.message,isDestructive:i.isDestructive,onConfirm:i.onConfirm,onCancel:()=>d(null)})]}):null}let ei=({className:e})=>(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[(0,a.jsx)("path",{d:"M12 2v4"}),(0,a.jsx)("path",{d:"m16.2 7.8 2.9-2.9"}),(0,a.jsx)("path",{d:"M18 12h4"}),(0,a.jsx)("path",{d:"m16.2 16.2 2.9 2.9"}),(0,a.jsx)("path",{d:"M12 18v4"}),(0,a.jsx)("path",{d:"m4.9 19.1 2.9-2.9"}),(0,a.jsx)("path",{d:"M2 12h4"}),(0,a.jsx)("path",{d:"m4.9 4.9 2.9 2.9"})]});function ed({allPoolParticipants:e,poolActivePlayers:t,round:r,flights:l,processedFlights:s,winningsMap:o}){let[i,d]=(0,n.useState)(null),[c,u]=(0,n.useState)(null),f=async e=>{let t=r.players.find(t=>t.player.id===e);if(!t||c)return;u(t.id);let a=await el(t.id);u(null),a.data?d(a.data):alert("Could not load scorecard details.")};return(0,a.jsxs)("div",{className:"p-6 space-y-8",children:[0===e.length?(0,a.jsx)("div",{className:"text-center",children:"No Participants selected."}):0===t.length?(0,a.jsxs)("div",{className:"py-20 flex flex-col items-center justify-center text-center space-y-6",children:[(0,a.jsx)("div",{className:"bg-amber-50 rounded-full p-8 text-amber-500",children:(0,a.jsx)("svg",{className:"w-16 h-16",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h3",{className:"text-[14pt] font-black text-gray-900 tracking-tight",children:"Waiting for Scores"}),(0,a.jsxs)("p",{className:"text-[14pt] text-gray-500 max-w-md mx-auto",children:[e.length," players are set for the pool, but they haven't posted scores for this round yet."]})]})]}):(0,a.jsxs)(a.Fragment,{children:[s.map((e,t)=>(0,a.jsxs)("div",{className:"space-y-12",children:[l.length>1&&(0,a.jsx)("div",{className:"border-b-2 border-gray-900 pb-2",children:(0,a.jsx)("h2",{className:"text-[14pt] font-black text-gray-900 uppercase tracking-tighter",children:e.name})}),(0,a.jsxs)("div",{className:"relative grid grid-cols-1 md:grid-cols-2 gap-12",children:[(0,a.jsx)("div",{className:"hidden md:block absolute left-1/2 top-0 bottom-0 w-px bg-gray-200 -ml-[0.5px]"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"text-center pb-2 border-b border-gray-900 mb-4",children:[(0,a.jsx)("h3",{className:"text-[14pt] font-black text-gray-900 uppercase tracking-widest",children:"Front Nine"}),(0,a.jsxs)("div",{className:"text-[14pt] font-black text-green-600 mt-0.5",children:["$",e.pots.front.toFixed(2)]})]}),(0,a.jsx)("div",{className:"space-y-3",children:e.frontWinners.map((e,t)=>(0,a.jsxs)("div",{className:"flex justify-between items-center group",children:[(0,a.jsxs)("div",{className:"flex gap-3 items-center flex-1",children:[(0,a.jsxs)("button",{onClick:()=>f(e.id),className:"flex flex-col text-left cursor-pointer",children:[(0,a.jsx)("span",{className:"text-[14pt] font-black text-blue-600 underline decoration-black decoration-2 leading-tight",children:e.name.split(" ")[0]}),(0,a.jsx)("span",{className:"text-[14pt] text-gray-600 leading-none",children:e.name.split(" ").slice(1).join(" ")})]}),c===e.id&&(0,a.jsx)(ei,{className:"w-4 h-4 animate-spin text-gray-400"})]}),(0,a.jsxs)("div",{className:"text-right flex items-center gap-0 w-[200px] justify-end",children:[(0,a.jsx)("span",{className:"text-[14pt] text-gray-800 font-medium w-[30px] text-center",title:"Gross",children:e.gross}),(0,a.jsx)("span",{className:"text-[14pt] text-gray-400 font-medium w-[30px] text-center",title:"Half Hcp",children:e.frontHcp}),(0,a.jsxs)("span",{className:"text-[14pt] font-black text-black w-[50px] text-center",title:"Net",children:["(",e.score.toFixed(0),")"]}),(0,a.jsxs)("span",{className:"text-[14pt] font-black text-green-600 w-[70px] text-right",children:["$",e.amount.toFixed(2)]})]})]},t))})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"text-center pb-2 border-b border-gray-900 mb-4",children:[(0,a.jsx)("h3",{className:"text-[14pt] font-black text-gray-900 uppercase tracking-widest",children:"Back Nine"}),(0,a.jsxs)("div",{className:"text-[14pt] font-black text-green-600 mt-0.5",children:["$",e.pots.back.toFixed(2)]})]}),(0,a.jsx)("div",{className:"space-y-3",children:e.backWinners.map((e,t)=>(0,a.jsxs)("div",{className:"flex justify-between items-center group",children:[(0,a.jsxs)("div",{className:"flex gap-3 items-center flex-1",children:[(0,a.jsxs)("button",{onClick:()=>f(e.id),className:"flex flex-col text-left cursor-pointer",children:[(0,a.jsx)("span",{className:"text-[14pt] font-black text-blue-600 underline decoration-black decoration-2 leading-tight",children:e.name.split(" ")[0]}),(0,a.jsx)("span",{className:"text-[14pt] text-gray-600 leading-none",children:e.name.split(" ").slice(1).join(" ")})]}),c===e.id&&(0,a.jsx)(ei,{className:"w-4 h-4 animate-spin text-gray-400"})]}),(0,a.jsxs)("div",{className:"text-right flex items-center gap-0 w-[200px] justify-end",children:[(0,a.jsx)("span",{className:"text-[14pt] text-gray-800 font-medium w-[30px] text-center",title:"Gross",children:e.gross}),(0,a.jsx)("span",{className:"text-[14pt] text-gray-400 font-medium w-[30px] text-center",title:"Half Hcp",children:e.backHcp}),(0,a.jsxs)("span",{className:"text-[14pt] font-black text-black w-[50px] text-center",title:"Net",children:["(",e.score.toFixed(0),")"]}),(0,a.jsxs)("span",{className:"text-[14pt] font-black text-green-600 w-[70px] text-right",children:["$",e.amount.toFixed(2)]})]})]},t))})]})]}),(0,a.jsx)("div",{className:"border-t-2 border-dashed border-gray-300 my-8"}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center pb-2 border-b border-gray-900 max-w-sm mx-auto mb-6",children:[(0,a.jsx)("h3",{className:"text-[14pt] font-black text-gray-900 uppercase tracking-widest leading-none",children:"Total"}),(0,a.jsxs)("div",{className:"text-[14pt] font-black text-green-600 mt-1",children:["$",e.pots.total.toFixed(2)]})]}),(0,a.jsx)("div",{className:"space-y-4 max-w-2xl mx-auto",children:e.totalWinners.map((e,t)=>(0,a.jsxs)("div",{className:"flex justify-between items-center group",children:[(0,a.jsxs)("div",{className:"flex gap-4 items-center flex-1",children:[(0,a.jsxs)("button",{onClick:()=>f(e.id),className:"flex flex-col text-left cursor-pointer",children:[(0,a.jsx)("span",{className:"text-[14pt] font-black text-blue-600 underline decoration-black decoration-2 leading-tight",children:e.name.split(" ")[0]}),(0,a.jsx)("span",{className:"text-[14pt] text-gray-600 leading-none",children:e.name.split(" ").slice(1).join(" ")})]}),c===e.id&&(0,a.jsx)(ei,{className:"w-4 h-4 animate-spin text-gray-400"})]}),(0,a.jsxs)("div",{className:"text-right flex items-center gap-0 w-[240px] justify-end",children:[(0,a.jsx)("span",{className:"text-[14pt] text-gray-800 font-medium w-[40px] text-center",title:"Gross",children:e.gross}),(0,a.jsx)("span",{className:"text-[14pt] text-gray-400 font-medium w-[40px] text-center",title:"Net",children:e.courseHcp}),(0,a.jsxs)("span",{className:"text-[14pt] font-black text-black w-[60px] text-center",title:"Total",children:["(",e.score.toFixed(0),")"]}),(0,a.jsxs)("span",{className:"text-[14pt] font-black text-green-600 w-[100px] text-right",children:["$",e.amount.toFixed(2)]})]})]},t))})]})]},t)),(0,a.jsxs)("div",{className:"pt-10 space-y-6",children:[(0,a.jsx)("h3",{className:"text-[14pt] font-bold text-gray-900",children:"Total by Winners:"}),(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:Array.from(o.entries()).sort((e,t)=>t[1]-e[1]).map(([e,t])=>(0,a.jsxs)("div",{className:"bg-[#f4fbf7] border border-green-100 rounded-lg p-3 flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex flex-col overflow-hidden",children:[(0,a.jsx)("span",{className:"text-[14pt] font-black text-black leading-none",children:e.split(" ")[0]}),(0,a.jsx)("span",{className:"text-[14pt] text-gray-600 truncate",children:e.split(" ").slice(1).join(" ")})]}),(0,a.jsxs)("span",{className:"text-[14pt] font-black text-green-600 ml-2 whitespace-nowrap",children:["$",t.toFixed(2)]})]},e))})]}),(0,a.jsx)(eo,{roundId:r.id,payouts:Array.from(o.entries()).map(([e,t])=>{let a=r.players.find(t=>t.player.name===e);return{playerId:a?.player_id||"",amount:t}})})]}),i&&(0,a.jsx)(en,{data:i,isOpen:!!i,onClose:()=>d(null)})]})}let ec=(0,u.createServerReference)("406fc12390af8bd16819160cbaca215638b8b3cea0",u.callServer,void 0,u.findSourceMapURL,"getPoolResults"),eu=(0,u.createServerReference)("60728f089565641ef1bae86aaf5f9593972fbeaf0c",u.callServer,void 0,u.findSourceMapURL,"updatePoolParticipants");function ef({roundId:e,allPlayers:t,initialSelectedIds:r,isOpen:l,onClose:s,isAdmin:o}){let[i,d]=(0,n.useState)(r),[c,u]=(0,n.useState)(!1);if(!l)return null;let f=e=>{o&&d(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},p=async()=>{u(!0);try{await eu(e,i),s(),window.location.reload()}catch(e){console.error(e),alert(`Failed to update players: ${e.message||"Unknown error"}`)}finally{u(!1)}},h=[...t].sort((e,t)=>e.name.localeCompare(t.name));return(0,a.jsx)("div",{className:"fixed inset-0 z-[200] flex items-center justify-center bg-black/60 backdrop-blur-sm",children:(0,a.jsxs)("div",{className:"bg-white w-full h-full flex flex-col shadow-2xl overflow-hidden animate-in fade-in zoom-in duration-200",children:[(0,a.jsxs)("div",{className:"px-1 py-5 border-b border-gray-100 flex justify-between items-center bg-[#f8fafc]",children:[(0,a.jsx)("h2",{className:"text-[14pt] font-black text-gray-800 tracking-tight",children:"Manage Pool Participants"}),(0,a.jsx)("button",{onClick:s,className:"px-4 py-2 bg-black text-white rounded-full text-[15pt] font-bold hover:bg-gray-800 transition-colors",children:"Close"})]}),(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto p-6",children:[o&&(0,a.jsxs)("div",{className:"flex gap-4 mb-6",children:[(0,a.jsx)("button",{onClick:()=>d(t.map(e=>e.id)),className:"text-[14pt] font-bold text-green-600 hover:text-green-700 transition-colors",children:"Select All"}),(0,a.jsx)("button",{onClick:()=>d([]),className:"text-[14pt] font-bold text-red-600 hover:text-red-700 transition-colors",children:"Uncheck All"})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:h.map(e=>{let t=i.includes(e.id);return(0,a.jsxs)("button",{onClick:()=>f(e.id),disabled:!o,className:`flex items-center gap-4 p-4 rounded-xl border-2 transition-all text-left ${t?"border-green-500 bg-green-50 shadow-sm":"border-gray-100 bg-white hover:border-gray-200"} ${o?"cursor-pointer":"cursor-not-allowed opacity-60"}`,children:[(0,a.jsx)("div",{className:`w-7 h-7 rounded flex items-center justify-center border-2 transition-colors ${t?"bg-green-600 border-green-600":"bg-white border-gray-300"}`,children:t&&(0,a.jsx)("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M5 13l4 4L19 7"})})}),(0,a.jsx)("span",{className:`text-[14pt] font-bold ${t?"text-green-800":"text-gray-700"}`,children:e.name})]},e.id)})})]}),(0,a.jsxs)("div",{className:"px-1 py-5 bg-[#f8fafc] border-t border-gray-100 flex justify-end gap-3",children:[(0,a.jsx)("button",{onClick:s,className:"px-4 py-2 rounded-xl text-[15pt] font-bold text-gray-600 hover:bg-gray-200 transition-colors",disabled:c,children:o?"Cancel":"Close"}),o&&(0,a.jsx)("button",{onClick:p,disabled:c,className:"bg-[#04d361] hover:bg-[#04b754] text-white px-4 py-2 rounded-xl text-[15pt] font-bold shadow-lg transition-all active:scale-95 flex items-center gap-2",children:c?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving..."]}):"Save Pool Participants"})]})]})})}function ep({roundId:e,allPlayers:t,currentParticipantIds:r}){let[l,s]=(0,n.useState)(!1),[o,i]=(0,n.useState)(!1);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("button",{onClick:()=>s(!0),className:"bg-black text-white px-4 py-2 rounded-full text-[15pt] font-bold hover:bg-gray-800 transition-colors shadow-sm cursor-pointer",children:["Players (",r.length,")"]}),(0,a.jsx)(ef,{roundId:e,allPlayers:t,initialSelectedIds:r,isOpen:l,onClose:()=>s(!1),isAdmin:o})]})}function eh({date:e,roundName:t,isTournament:r,flights:n}){let l=async()=>{let[a,l,s]=e.split("T")[0].split("-").map(Number),o=ea(new Date(a,l-1,s,12,0,0),"MMMM d, yyyy"),i=`
            <div style="font-family: Arial, sans-serif; color: #333; max-width: 650px; background: white; padding: 20px; border: 1px solid #e5e7eb;">
                <div style="text-align: center; border-bottom: 2px solid #16a34a; padding-bottom: 15px; margin-bottom: 20px;">
                    <h1 style="margin: 0; font-size: 24px; color: #16a34a;">$5 POOL RESULTS</h1>
                    <div style="margin-top: 5px; font-size: 18px; color: #4b5563;">
                        ${o} ${t?` - ${t}`:""}
                    </div>
                    ${r?'<div style="color: #b45309; font-weight: bold; margin-top: 5px;">\uD83C\uDFC6 TOURNAMENT RESULTS</div>':""}
                </div>
        `;n.forEach(e=>{let t=e.players?.length||0;i+=`
                <div style="margin-bottom: 25px;">
                    <h2 style="background: #f1f5f9; padding: 8px; font-size: 18px; border-left: 4px solid #16a34a; margin-bottom: 15px;">${e.name} (${t} players, $${(5*t).toFixed(2)} collected)</h2>
            `,r?i+="<h3>Tournament Placement</h3>":(i+=`<h3>Front Nine ($${e.pots.front.toFixed(2)})</h3>`,i+=c(e.frontWinners,"front"),i+='<hr style="border: 0; border-top: 2px dashed #9ca3af; margin: 20px 0;">',i+=`<h3>Back Nine ($${e.pots.back.toFixed(2)})</h3>`,i+=c(e.backWinners,"back"),i+='<hr style="border: 0; border-top: 2px dashed #9ca3af; margin: 20px 0;">',i+=`<h3>Total ($${e.pots.total.toFixed(2)})</h3>`),i+=c(e.totalWinners,"total"),i+="</div>"}),i+='<hr style="border: 0; border-top: 3px double #16a34a; margin: 20px 0;">';let d=new Map;function c(e,t="total"){if(0===e.length)return'<p style="color: #9ca3af; font-style: italic;">No entries</p>';let r=`
                <table style="width: 100%; border-collapse: collapse; margin-bottom: 15px; font-size: 14px;">
                    <thead>
                        <tr style="border-bottom: 1px solid #e5e7eb; text-align: left; color: #6b7280;">
                            <th style="padding: 6px 0;">Pos</th>
                            <th style="padding: 6px 0;">Player</th>
                            <th style="padding: 6px 0; text-align: center;">Gross</th>
                            <th style="padding: 6px 0; text-align: center;">Hcp</th>
                            <th style="padding: 6px 0; text-align: center;">Net</th>
                            <th style="padding: 6px 0; text-align: right;">Amount</th>
                        </tr>
                    </thead>
                    <tbody>
            `;return e.forEach((e,a)=>{let n="front"===t?e.frontHcp||0:"back"===t?e.backHcp||0:e.courseHcp||0;r+=`
                    <tr style="border-bottom: 1px solid #f3f4f6;">
                        <td style="padding: 8px 0;">${e.position||a+1}</td>
                        <td style="padding: 8px 0;"><b>${e.name}</b></td>
                        <td style="padding: 8px 0; text-align: center;">${e.gross}</td>
                        <td style="padding: 8px 0; text-align: center; color: #9ca3af;">${n}</td>
                        <td style="padding: 8px 0; text-align: center; color: #16a34a; font-weight: bold;">(${Math.round(e.score)})</td>
                        <td style="padding: 8px 0; text-align: right; font-weight: bold;">$${e.amount.toFixed(2)}</td>
                    </tr>
                `}),r+="</tbody></table>"}n.forEach(e=>{[...e.frontWinners,...e.backWinners,...e.totalWinners].forEach(e=>{let t=d.get(e.name)||0;d.set(e.name,t+e.amount)})}),i+=`
            <div style="padding: 20px 0;">
                <h3 style="margin-top: 0; margin-bottom: 15px; color: #111; font-size: 11pt; font-weight: bold;">Total by Winners:</h3>
                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px;">
        `,Array.from(d.entries()).sort((e,t)=>t[1]-e[1]).forEach(([e,t])=>{let[r,...a]=e.split(" "),n=a.join(" ");i+=`
                    <div style="background: #f4fbf7; border: 1px solid #d1fae5; border-radius: 8px; padding: 10px; display: flex; justify-content: space-between; align-items: center;">
                        <div style="display: flex; flex-direction: column; overflow: hidden;">
                            <span style="font-size: 11pt; font-weight: 900; color: #000; line-height: 1.2; margin-bottom: 2px;">${r}</span>
                            <span style="font-size: 11pt; color: #6b7280; line-height: 1.2; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">${n}</span>
                        </div>
                        <span style="font-size: 11pt; font-weight: 900; color: #16a34a; margin-left: 8px; white-space: nowrap;">$${t.toFixed(2)}</span>
                    </div>
                `});let u=new Blob([i+="</div></div></div>"],{type:"text/html"}),f=new Blob([i.replace(/<[^>]*>?/gm,"")],{type:"text/plain"});try{await navigator.clipboard.write([new ClipboardItem({"text/html":u,"text/plain":f})]),alert("Pool results copied to clipboard!")}catch(e){console.error(e),alert("Failed to copy")}};return(0,a.jsx)("button",{onClick:l,className:"p-2.5 bg-black rounded-lg hover:bg-gray-800 transition-colors shadow-sm text-white cursor-pointer",title:"Copy Results",children:(0,a.jsx)(o,{className:"w-5 h-5"})})}function ex({allRounds:e,currentRoundId:t,onSelect:r}){let n=(0,l.useRouter)();return(0,a.jsx)("select",{title:"Select Round Filter",className:"flex-1 mx-1 bg-white border border-gray-300 rounded-lg px-1 sm:px-1 py-2 sm:py-2.5 text-[14pt] font-bold text-gray-800 focus:outline-none focus:ring-2 focus:ring-green-500 appearance-none min-w-0 cursor-pointer hover:bg-gray-50 transition-colors",value:t,onChange:e=>{r?r(e.target.value):n.push(`/pool?roundId=${e.target.value}`)},children:e.map(e=>{let t=e._count?.players||0;if(t<12)return null;let[r,n,l]=e.date.split("T")[0].split("-").map(Number),s=ea(new Date(r,n-1,l,12,0,0),"MMM d, yyyy"),o=e.name?`${e.name} (${s}) - ${t}`:`${s} - ${t}`;return(0,a.jsxs)("option",{value:e.id,children:[o,e.isTournament?" \uD83C\uDFC6":""]},e.id)})})}function eb({roundId:e,isOpen:t,onClose:r}){let[l,s]=(0,n.useState)(null),[o,d]=(0,n.useState)(!0),[c,u]=(0,n.useState)(null),[f,p]=(0,n.useState)(!1),[h,x]=(0,n.useState)(e),b=async e=>{let t=await ec(e);if(t.success&&t.data){let e=new Map(t.data.winningsArray);s({...t.data,winningsMap:e}),d(!1)}else u(t.error||"Failed to load pool data"),d(!1)};return t?(0,a.jsxs)("div",{className:"fixed inset-0 z-[100] flex flex-col bg-white overflow-hidden animate-in fade-in zoom-in duration-200",children:[(0,a.jsxs)("header",{className:"bg-white border-b border-gray-200 px-4 py-4 flex items-center justify-between shadow-sm sticky top-0 z-10",children:[(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("h2",{className:"text-[18pt] font-black text-green-600 leading-tight text-left ml-3",children:"$5 Pool Results"}),l?.round&&(0,a.jsxs)("p",{className:"text-[12pt] text-gray-500 font-medium",children:[new Date(l.round.date).toLocaleDateString()," ",l.round.name?`- ${l.round.name}`:""]})]}),(0,a.jsx)("button",{onClick:r,className:"px-4 py-2 bg-black text-white rounded-full text-[15pt] font-bold hover:bg-gray-800 transition-colors mr-3",children:"Close"})]}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto bg-gray-50",children:o?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center h-full space-y-4 py-20",children:[(0,a.jsx)("div",{className:"w-12 h-12 border-4 border-green-200 border-t-green-600 rounded-full animate-spin"}),(0,a.jsx)("p",{className:"text-[14pt] font-bold text-gray-500 animate-pulse",children:"Calculating Pots & Skins..."})]}):c?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center h-full p-8 text-center space-y-4",children:[(0,a.jsx)("div",{className:"bg-red-50 text-red-500 p-6 rounded-full",children:(0,a.jsx)(v.A,{className:"w-12 h-12"})}),(0,a.jsx)("h3",{className:"text-[16pt] font-bold text-gray-900",children:"Oops! Something went wrong"}),(0,a.jsx)("p",{className:"text-[14pt] text-gray-500 max-w-md",children:c}),(0,a.jsx)("button",{onClick:()=>b(h),className:"bg-black text-white px-6 py-2 rounded-full font-bold text-[14pt] hover:bg-gray-800 transition-colors",children:"Try Again"})]}):(0,a.jsxs)("main",{className:"px-1 py-4 max-w-5xl mx-auto w-full",children:[(0,a.jsxs)("div",{className:"bg-white border border-gray-200 rounded-xl p-1 flex items-center justify-between gap-1 mb-4 shadow-sm",children:[(0,a.jsx)(ex,{allRounds:l.allRounds,currentRoundId:h,onSelect:e=>x(e)}),f&&(0,a.jsxs)("div",{className:"flex gap-1 shrink-0",children:[(0,a.jsx)(eh,{date:l.round.date,roundName:l.round.name,isTournament:l.round.is_tournament,flights:l.processedFlights}),(0,a.jsx)("button",{className:"p-2.5 bg-black rounded-lg hover:bg-gray-800 transition-colors shadow-sm text-white cursor-pointer",children:(0,a.jsx)(i.A,{className:"w-5 h-5"})})]})]}),(0,a.jsxs)("div",{className:"border border-gray-300 rounded-2xl overflow-hidden shadow-xl bg-white mb-10",children:[(0,a.jsxs)("div",{className:"bg-[#f3f4fa] border-b border-gray-300 px-1 py-4 flex justify-between items-center",children:[(0,a.jsx)("h2",{className:"text-[14pt] font-bold text-gray-700",children:"Pool Participants"}),(0,a.jsx)(ep,{roundId:l.round.id,allPlayers:l.round.players.map(e=>({id:e.player_id,name:e.player.name})),currentParticipantIds:l.allPoolParticipants.map(e=>e.player_id)})]}),(0,a.jsx)(ed,{allPoolParticipants:l.allPoolParticipants,poolActivePlayers:l.poolActivePlayers,round:l.round,flights:l.flights,processedFlights:l.processedFlights,winningsMap:l.winningsMap})]})]})})]}):null}let em=(0,u.createServerReference)("4075f3342e6d3a48d8836f55b1fbb6a90b543c7f9e",u.callServer,void 0,u.findSourceMapURL,"addGuestToLiveRound"),eg=(0,u.createServerReference)("40d02882bbd968574d136b30792b70e02bba847d8a",u.callServer,void 0,u.findSourceMapURL,"updateGuestInLiveRound"),ey=(0,u.createServerReference)("405955f419b11743d6d7dbb6f62f1a255da70c9235",u.callServer,void 0,u.findSourceMapURL,"deleteGuestFromLiveRound"),ew=(0,u.createServerReference)("4082c09ee0a3d3c0abce26a561ec48999b51d2f067",u.callServer,void 0,u.findSourceMapURL,"saveLiveScore"),ev=(0,u.createServerReference)("402987608957ba5a79535126794248fadd531c8ec1",u.callServer,void 0,u.findSourceMapURL,"deleteLiveRound"),eN=(0,u.createServerReference)("40179cad928d59cabe33eb581332bb05b821dd37cc",u.callServer,void 0,u.findSourceMapURL,"copyLiveToClub"),ej=(0,u.createServerReference)("40ec98da2cf06dc86cb574c105315afb1db2b5eb29",u.callServer,void 0,u.findSourceMapURL,"removePlayerFromLiveRound"),ek=(0,u.createServerReference)("78d54b99254b315713f04e86320ffa065f0417bf83",u.callServer,void 0,u.findSourceMapURL,"sendScorecardEmail"),eS=(0,u.createServerReference)("4083c3adc94b0336e5535c15ea070d95939c5ac7db",u.callServer,void 0,u.findSourceMapURL,"deleteUserLiveRound");function eC({allPlayers:e,defaultCourse:t,initialRound:r,todayStr:s,allLiveRounds:u,allCourses:f,isAdmin:h,currentUserId:x,lastUsedCourseId:v,lastUsedTeeBoxId:N}){let j=(0,l.useRouter)(),[k,S]=(0,n.useState)(r?.id||null),[C,P]=(0,n.useState)(h),[R,I]=(0,n.useState)([]),[E,M]=(0,n.useState)(!1),[$,_]=(0,n.useState)(!1),[z,T]=(0,n.useState)("new"),[F,D]=(0,n.useState)(!1),[A,B]=(0,n.useState)([]),[L,O]=(0,n.useState)(null),[U,H]=(0,n.useState)(!1),[W,G]=(0,n.useState)(!1),[q,Y]=(0,n.useState)(!1),[J,V]=(0,n.useState)(!1),[Q,X]=(0,n.useState)([]),[K,Z]=(0,n.useState)([]),[ee,et]=(0,n.useState)(!1),[er,ea]=(0,n.useState)(new Map),[en,el]=(0,n.useState)(null),[es,eo]=(0,n.useState)(null),[ei,ed]=(0,n.useState)(!1),[ec,eu]=(0,n.useState)(null),[ef,ep]=(0,n.useState)(""),eh=(e,t)=>{eu({isOpen:!0,title:e,message:t,onConfirm:()=>eu(null),hideCancel:!0,confirmText:"OK"})},ex=(e,t,r,a=!1)=>{eu({isOpen:!0,title:e,message:t,onConfirm:()=>{r(),eu(null)},isDestructive:a})},eC=(e,t,r,a)=>{let n=e*Math.PI/180,l=r*Math.PI/180,s=(r-e)*Math.PI/180,o=(a-t)*Math.PI/180,i=Math.sin(s/2)*Math.sin(s/2)+Math.cos(n)*Math.cos(l)*Math.sin(o/2)*Math.sin(o/2);return Math.round(2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i))*6967389.31)},[eP,eR]=(0,n.useState)(()=>{let e=new Map;return r?.players&&r.players.forEach(t=>{let r=new Map;t.scores&&t.scores.forEach(e=>{e.hole?.holeNumber&&r.set(e.hole.holeNumber,e.strokes)});let a=t.is_guest?t.id:t.player.id;e.set(a,r)}),e}),eI=(0,n.useRef)(new Map),eE=(0,n.useRef)(new Map);(0,n.useRef)(!1),(0,n.useRef)(null);let[eM,e$]=(0,n.useState)(!1),e_=(0,l.useSearchParams)(),[ez,eT]=(0,n.useState)(()=>{let e=e_.get("hole");if(e){let t=parseInt(e);if(t>=1&&t<=18)return t}if(!r?.players||0===r.players.length)return 1;for(let e=1;e<=18;e++)if(!r.players.every(t=>t.scores&&t.scores.some(t=>t.hole?.holeNumber===e)))return e;return 1}),[eF,eD]=(0,n.useState)(!0),eA=r?.date||s,eB=s>eA,eL=C||!eB,eO=t?.holes.find(e=>e.holeNumber===ez)?.par||4;t?.holes.find(e=>e.holeNumber===ez)?.difficulty;let eU=e=>{let t=e.trim().split(" ");if(1===t.length)return{first:t[0],last:""};let r=t[t.length-1];return{first:t.slice(0,-1).join(" "),last:r}},eH=(e,t)=>t===ez&&er.has(e)?er.get(e)??null:eP.get(e)?.get(t)??null,eW=(e,t)=>eP.get(e)?.get(t)??null,eG=e=>{if(!t)return null;if(e.preferred_tee_box){let r=t.teeBoxes.find(t=>t.name.toLowerCase()===e.preferred_tee_box?.toLowerCase());if(r)return r;let a=t.teeBoxes.find(t=>t.name.toLowerCase().includes(e.preferred_tee_box.toLowerCase()));if(a)return a}if(r?.rating&&r?.slope){let e=t.teeBoxes.find(e=>e.rating===r.rating&&e.slope===r.slope);if(e)return e}return t.teeBoxes.find(e=>e.name.toLowerCase().includes("white"))||t.teeBoxes[0]},eq=e=>{if(e.liveRoundData?.course_hcp!==void 0&&null!==e.liveRoundData.course_hcp)return e.liveRoundData.course_hcp;let a=eG(e);if(!a)return 0;let n=a.rating,l=a.slope,s=r?.par??(t?.holes.reduce((e,t)=>e+t.par,0)||72);return Math.round(e.index*l/113+(n-s))},eY=async e=>{if(!k||!r){eh("Error","No active live round found");return}console.log("Adding guest to database:",e);let t=await em({liveRoundId:k,guestName:e.name,index:e.index,courseHandicap:e.courseHandicap,rating:r.rating,slope:r.slope,par:r.par,scorerId:C?void 0:ef});if(t.success&&t.guestPlayerId){console.log("Guest added successfully, refreshing page");let e=localStorage.getItem("live_scoring_my_group"),r=e?JSON.parse(e):[];r.includes(t.guestPlayerId)||(r.push(t.guestPlayerId),localStorage.setItem(`live_scoring_my_group_${k}`,JSON.stringify(r))),j.refresh()}else eh("Error","Failed to add guest: "+t.error)},eJ=async(e,t)=>{console.log("Updating guest in database:",e,t);let r=await eg({guestPlayerId:e,guestName:t.name,index:t.index,courseHandicap:t.courseHandicap});r.success?(console.log("Guest updated successfully, refreshing page"),O(null),j.refresh()):eh("Error","Failed to update guest: "+r.error)},eV=async e=>{console.log("Deleting guest from database:",e);let t=await ey(e);t.success?(console.log("Guest deleted successfully, refreshing page"),D(!1),O(null),j.refresh()):eh("Error","Failed to delete guest: "+t.error)},eQ=async e=>{if(!k){eh("Error","No live round selected");return}let t=await eN({liveRoundId:k,playerIds:e});t.success?eh("Success",t.message||"Successfully copied to club scores!"):eh("Error","Failed to copy: "+t.error)},eX=(e,t)=>{let r=[...R],a="up"===t?e-1:e+1;a>=0&&a<r.length&&([r[e],r[a]]=[r[a],r[e]],I(r),localStorage.setItem(`live_scoring_my_group_${k}`,JSON.stringify(r.map(e=>e.id))))},eK=async t=>{let a=[...e,...A],n=t.map(e=>a.find(t=>t.id===e)).filter(e=>void 0!==e);I(n);let l=n.filter(e=>!e.isGuest&&!e.id.startsWith("guest-"));if(!k){eh("No Round Selected","Please create a new round or select an existing round before adding players.");return}for(let e of l){let t=r?.players?.find(t=>t.player?.id===e.id),a=!t,n=t&&t.scorer_id!==ef&&!C;if(a||n){let t=eG(e);k&&t?.id&&(console.log(a?"Creating player in round:":"Claiming player from other device:",e.name),await b({liveRoundId:k,playerId:e.id,teeBoxId:t.id,scorerId:C?void 0:ef}))}}let s=R.filter(e=>!t.includes(e.id));if(k&&r?.players){let e=[];for(let t of s){let a=r.players.find(e=>e.is_guest&&e.id===t.id||!e.is_guest&&e.player?.id===t.id);if(a){let r=a.scores&&a.scores.length>0;console.log("Removing player from round:",a.id,r?"(has scores)":"(no scores)","scorer_id:",a.scorer_id,"client:",ef);try{let r=await ej(a.id);r.success?console.log("✓ Successfully removed player:",a.id):r.error&&(r.error.includes("does not exist")||r.error.includes("Record to delete"))?console.log("✓ Player already removed (concurrency):",a.id):(console.error("✗ Failed to remove player:",a.id,r.error),eh("Error",`Failed to remove player: ${r.error||"Unknown error"}`),e.push(t))}catch(a){console.error("✗ Error removing player:",a);let r=String(a);r.includes("does not exist")||r.includes("Record to delete")||(eh("Error",`Error removing player: ${a}`),e.push(t))}}}e.length>0&&I(t=>{let r=new Set(t.map(e=>e.id));return[...t,...e.filter(e=>!r.has(e.id))]}),j.refresh()}},eZ=(e,t)=>{if(!k){console.warn("No live round ID available to save score.");return}let r=eP.get(e)?.get(ez),a=er.get(e)??r??eO,n=t?a+1:a-1;n<1&&(n=1),ea(t=>{let r=new Map(t);return r.set(e,n),r}),et(!0)},e0=async(e,t,r)=>{if(!k)return;let a=parseInt(r);if(!isNaN(a)&&!(a<0)){eR(r=>{let n=new Map(r),l=new Map(n.get(e)||new Map);return l.set(t,a),n.set(e,l),n});try{await ew({liveRoundId:k,holeNumber:t,playerScores:[{playerId:e,strokes:a}],scorerId:C?void 0:ef})}catch(e){console.error("Admin summary save failed:",e)}}},e1=(0,n.useMemo)(()=>{let e=new Map;return r?.players&&r.players.forEach(t=>{t.is_guest?e.set(t.id,{id:t.id,name:t.guest_name||"Guest",index:t.index_at_time,preferred_tee_box:null,isGuest:!0,liveRoundPlayerId:t.id,scorerId:t.scorer_id,liveRoundData:{tee_box_name:t.tee_box_name,course_hcp:t.course_handicap}}):t.player&&e.set(t.player.id,{id:t.player.id,name:t.player.name,index:t.player.index,preferred_tee_box:t.player.preferred_tee_box,liveRoundPlayerId:t.id,scorerId:t.scorer_id,liveRoundData:{tee_box_name:t.tee_box_name,course_hcp:t.course_handicap}})}),R.forEach(t=>{e.has(t.id)||e.set(t.id,t)}),Array.from(e.values())},[r,R]),e2=C?e1:R.length>0?R:[];e2.length>0&&e2.every(e=>{let t=eP.get(e.id);if(!t)return!1;for(let e=1;e<=18;e++)if(!t.has(e))return!1;return!0});let e4=e1.map(e=>{let r=eP.get(e.id),a=0,n=0,l=0,s=0,o=0,i=0,d=eq(e),c=[];r&&r.forEach((e,r)=>{a+=e,r<=9?n+=e:l+=e;let u=t?.holes.find(e=>e.holeNumber===r),f=u?.par||4,p=u?.difficulty||r;c.push({difficulty:p,grossScore:e});let h=0;d>0&&(h=Math.floor(d/18)+(p<=d%18?1:0)),s+=h,o+=f,i++}),c.sort((e,t)=>e.difficulty-t.difficulty);let u=a-s,f=a-o;return{...e,totalGross:a,front9:n,back9:l,strokesReceivedSoFar:s,courseHcp:d,totalNet:u,thru:i,toPar:f,parTotal:o,grossHoleScores:c}}).sort((e,t)=>{if(e.totalNet!==t.totalNet)return e.totalNet-t.totalNet;let r=Math.min(e.grossHoleScores.length,t.grossHoleScores.length);for(let a=0;a<r;a++)if(e.grossHoleScores[a].grossScore!==t.grossHoleScores[a].grossScore)return e.grossHoleScores[a].grossScore-t.grossHoleScores[a].grossScore;return 0}),e5=e4.filter(e=>e.thru>0);e5.length>0&&e5.every(e=>e.thru>=18),e4.length>0&&e4.every(e=>e.thru>=18);let e3=e4.map(e=>{let r=eP.get(e.id),a=0,n=0;return r&&r.forEach((e,r)=>{let l=t?.holes.find(e=>e.holeNumber===r),s=e-(l?.par||4);-1===s&&a++,s<=-2&&n++}),{...e,birdieCount:a,eagleCount:n}}),e6=e3.filter(e=>e.birdieCount>0).sort((e,t)=>t.birdieCount-e.birdieCount),e8=e3.filter(e=>e.eagleCount>0).sort((e,t)=>t.eagleCount-e.eagleCount);return r||k||$?(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50 pb-20 text-black",children:[(0,a.jsx)("header",{className:"bg-white shadow-sm sticky top-0 z-50 px-1 py-1",children:(0,a.jsx)("div",{className:"w-full flex justify-between items-center",children:(0,a.jsx)("h1",{className:"text-[18pt] font-bold text-green-700 tracking-tight flex-1 text-left ml-3",children:"Live Scoring"})})}),(0,a.jsxs)("main",{className:"w-full px-1 pt-1 m-0 space-y-1",children:[eF&&(0,a.jsxs)("div",{className:"min-h-[80px] bg-white rounded-xl shadow-lg p-1 border-4 border-gray-300 flex flex-col justify-center",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[(0,a.jsx)("label",{htmlFor:"round-selector",className:"text-[15pt] font-bold text-gray-900 ml-1",children:"Select Round:"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[k&&C&&(0,a.jsx)("button",{onClick:()=>H(!0),className:"bg-green-600 text-white text-[15pt] font-bold px-4 py-2 rounded-full hover:bg-green-700 transition-all shadow-md active:scale-95",children:"Transfer"}),C&&k&&(0,a.jsx)("button",{onClick:()=>{k&&eu({isOpen:!0,title:"Delete Live Round",message:"Are you sure you want to delete this live round? This action cannot be undone.",isDestructive:!0,onConfirm:async()=>{eu(null);try{console.log("Attempting to delete round:",k);let e=await ev(k);console.log("Delete result:",e),e.success?window.location.href="/":(console.error("Delete failed on server:",e.error),eh("Error","Failed to delete: "+e.error))}catch(e){console.error("Failed to delete round (client error):",e),eh("Error","Failed to delete round (network/client error).")}}})},className:"bg-red-600 text-white text-[15pt] font-bold px-4 py-2 rounded-full hover:bg-red-700 transition-all shadow-md active:scale-95",children:"Delete"}),!C&&k&&(0,a.jsx)("button",{onClick:()=>{let e=u.find(e=>e.id===k);e&&eu({isOpen:!0,title:"Delete Round",message:`Are you sure you want to delete "${e.name}" (${e.date})? This action cannot be undone.`,isDestructive:!0,onConfirm:async()=>{eu(null);try{let e=await eS(k);e.success?window.location.href="/":eh("Error",e.error||"Failed to delete round")}catch(e){console.error("Failed to delete round:",e),eh("Error","Failed to delete round")}}})},className:"bg-red-600 text-white text-[15pt] font-bold px-4 py-2 rounded-full hover:bg-red-700 transition-all shadow-md active:scale-95",children:"Delete"}),(0,a.jsx)("button",{onClick:()=>{k?T("edit"):T("new"),_(!0)},className:"px-4 py-2 bg-black text-white rounded-full text-[15pt] font-bold hover:bg-gray-800 transition-colors shadow-md active:scale-95",children:"New"})]})]}),(0,a.jsxs)("button",{onClick:()=>V(!0),className:"flex-1 px-4 py-2 text-[15pt] bg-black text-white rounded-full font-bold hover:bg-gray-800 transition-colors flex justify-between items-center min-w-0",children:[(0,a.jsx)("span",{className:"truncate mr-2",children:(()=>{if(!k)return"-- Select a Round --";let e=u.find(e=>e.id===k);if(!e)return"-- Select a Round --";let t=e.date?new Date(e.date+"T12:00:00").toLocaleDateString("en-US",{weekday:"short"}):"";return t?`${t} - ${e.name.replace("New Orleans","").trim()}`:e.name.replace("New Orleans","").trim()})()}),(0,a.jsx)("span",{className:"text-sm",children:"▼"})]}),J&&(0,a.jsxs)("div",{className:"fixed inset-0 z-[100] bg-white flex flex-col animate-in slide-in-from-bottom-5 duration-200",children:[(0,a.jsxs)("div",{className:"bg-black text-white px-4 py-4 flex justify-between items-center shadow-md shrink-0",children:[(0,a.jsx)("h2",{className:"text-[18pt] font-bold",children:"Select Round"}),(0,a.jsx)("button",{onClick:()=>V(!1),className:"text-white p-2 rounded-full hover:bg-gray-800",children:(0,a.jsx)("span",{className:"text-[20pt] leading-none",children:"✕"})})]}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto p-4 space-y-2 bg-gray-50",children:u.map(e=>{let t=e.date?new Date(e.date+"T12:00:00").toLocaleDateString("en-US",{weekday:"short"}):"",r=e.id===k;return(0,a.jsx)("button",{onClick:()=>{V(!1),e.id!==k&&(window.location.href=`/?roundId=${e.id}`)},className:`w-full text-left p-1 rounded-xl shadow-sm border transaction-all active:scale-[0.98] ${r?"bg-green-50 border-green-500 ring-1 ring-green-500":"bg-white border-gray-200 hover:border-gray-300"}`,children:(0,a.jsx)("div",{className:"flex flex-col",children:(0,a.jsxs)("span",{className:`text-[16pt] font-bold ${r?"text-green-700":"text-gray-900"}`,children:[t?`${t} - `:"",e.name.replace("New Orleans","").trim()]})})},e.id)})})]})]}),eF&&(0,a.jsx)("div",{className:"bg-white text-black rounded-xl shadow-lg p-1 border-4 border-gray-300",children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("h2",{className:"text-[15pt] font-bold text-gray-900",children:t?.name||"Round"}),eB&&(0,a.jsx)("span",{className:"bg-red-100 text-red-700 text-[10pt] font-black px-2 py-0.5 rounded-full uppercase",children:"Locked"})]}),(0,a.jsxs)("div",{className:"flex flex-nowrap gap-x-2 text-[13pt] text-gray-500 mt-1 overflow-x-auto",children:[(0,a.jsx)("span",{className:"whitespace-nowrap",children:r?.date||s}),(0,a.jsxs)("span",{className:"whitespace-nowrap",children:["P:",r?.par??t?.holes?.reduce((e,t)=>e+t.par,0)]}),(0,a.jsxs)("span",{className:"whitespace-nowrap",children:["R:",r?.rating??t?.teeBoxes?.[0]?.rating]}),(0,a.jsxs)("span",{className:"whitespace-nowrap",children:["S:",r?.slope??t?.teeBoxes?.[0]?.slope]}),(()=>{let e=t?.teeBoxes?.find(e=>e.rating===(r?.rating??t?.teeBoxes?.[0]?.rating)&&e.slope===(r?.slope??t?.teeBoxes?.[0]?.slope)),n=e?.name||"",l=n.toLowerCase().includes("white")?"W":n.toLowerCase().includes("gold")?"G":n.charAt(0).toUpperCase();return l&&(0,a.jsx)("span",{className:"px-2 py-0.5 rounded text-[12pt] font-bold bg-white text-black border border-black whitespace-nowrap",children:l})})()]})]}),(0,a.jsx)("div",{className:"flex flex-col gap-1",children:eL&&!eB&&(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)("button",{onClick:()=>e$(!0),className:"bg-black text-white text-[15pt] font-bold px-3 py-1 rounded-full hover:bg-gray-800 transition-all shadow-md active:scale-95",children:"Players"}),(0,a.jsx)("button",{onClick:()=>{T("edit"),_(!0)},className:"bg-black text-white text-[15pt] font-bold px-3 py-1 rounded-full hover:bg-gray-800 transition-all shadow-md active:scale-95",children:"Course"})]})})]})}),(0,a.jsx)(m,{isOpen:$,onClose:()=>_(!1),courseId:v||t?.id||void 0,defaultTeeBoxId:N||void 0,existingRound:"edit"===z?r:null,allCourses:f,showAlert:eh,currentUserId:x}),(0,a.jsx)(p,{isOpen:eM,onClose:()=>e$(!1),allPlayers:[...e,...A],selectedIds:R.map(e=>e.id),playersInRound:r?.players?.map(e=>e.player?.id).filter(e=>e)||[],onSelectionChange:eK,isAdmin:C,currentUserId:x,courseData:t?{courseName:t.name,teeBoxes:t.teeBoxes,par:t.holes.reduce((e,t)=>e+t.par,0),roundTeeBox:r?{rating:r.rating,slope:r.slope}:null}:null}),(0,a.jsx)(y,{isOpen:F,onClose:()=>{D(!1),O(null)},onAdd:eY,onUpdate:eJ,onDelete:eV,editingGuest:L,roundData:r?{rating:r.rating,slope:r.slope,par:r.par}:null}),r&&(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-lg border-2 border-black my-1 p-2",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-1 border-b border-gray-100 pb-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("h2",{className:"text-[15pt] font-black text-gray-900 tracking-tight shrink-0",children:"GPS"}),eL&&(0,a.jsx)("button",{onClick:()=>ed(!ei),className:`px-4 py-1 rounded-full text-[15pt] font-bold transition-all shadow-sm active:scale-95 ${ei?"bg-green-600 text-white hover:bg-green-700":"bg-gray-300 text-gray-700 hover:bg-gray-400"}`,children:ei?"\uD83D\uDEF0️ ON":"\uD83D\uDEF0️ OFF"})]}),(0,a.jsxs)("button",{onClick:()=>eD(!eF),className:"px-4 py-1 bg-black text-white rounded-full text-[15pt] font-bold hover:bg-gray-800 transition-colors shadow-md active:scale-95",children:["Details ",eF?"▲":"▼"]})]}),ei&&eL&&(0,a.jsx)("div",{className:"min-h-[140px] flex flex-col justify-center",children:(()=>{let e=t?.holes.find(e=>e.holeNumber===ez);if(!es)return(0,a.jsx)("div",{className:"bg-gray-100 text-gray-500 p-1 rounded-xl border-2 border-dashed border-gray-300 text-center mb-2 shadow-inner",children:(0,a.jsx)("p",{className:"font-medium text-[15pt] animate-pulse py-6",children:"\uD83D\uDEF0️ Waiting for GPS..."})});if(!e?.latitude||!e?.longitude)return(0,a.jsx)("div",{className:"bg-yellow-50 text-yellow-700 p-1 rounded-xl text-center mb-2 shadow-inner border-2 border-yellow-400",children:(0,a.jsxs)("p",{className:"font-medium text-[15pt] py-6",children:["\uD83D\uDCCD Coordinates missing for Hole ",ez]})});let r=eC(es.latitude,es.longitude,Number(e.latitude),Number(e.longitude)),n=(t,r)=>e.elements?.find(e=>e.side===t&&e.elementNumber===r),l=(e,t,r)=>{let l=n(e,t);if(!l)return null;let s=l.frontLatitude&&l.frontLongitude?eC(es.latitude,es.longitude,Number(l.frontLatitude),Number(l.frontLongitude)):null,o=l.backLatitude&&l.backLongitude?eC(es.latitude,es.longitude,Number(l.backLatitude),Number(l.backLongitude)):null;if(!s&&!o&&!l.water&&!l.bunker&&!l.tree)return null;let i=(0,a.jsxs)("div",{className:"flex gap-0.5",children:[l.water&&(0,a.jsx)("span",{children:"\uD83D\uDCA7"}),l.bunker&&(0,a.jsx)("div",{className:"w-7 h-7 bg-[#d2b48c] border border-black/20 rounded-full"}),l.tree&&(0,a.jsx)("span",{children:"\uD83C\uDF33"})]}),d=(0,a.jsxs)("div",{className:`flex flex-col ${"LEFT"===e?"items-end":"items-start"} leading-none`,children:[(0,a.jsx)("span",{className:null===o?"invisible":"",children:o??"--"}),(0,a.jsx)("span",{className:null===s?"invisible":"",children:s??"--"})]});return(0,a.jsx)("div",{className:`absolute ${r} flex items-center gap-1 text-white text-[22pt] font-extrabold z-10 drop-shadow-[0_2px_2px_rgba(0,0,0,0.8)]`,children:"LEFT"===e?(0,a.jsxs)(a.Fragment,{children:[d,i]}):(0,a.jsxs)(a.Fragment,{children:[i,d]})})};return(0,a.jsxs)("div",{className:"bg-green-600 text-white w-full mx-auto p-1 rounded-xl text-center mb-2 border-2 border-black shadow-inner relative overflow-hidden",children:[l("LEFT",2,"top-2 left-2"),l("LEFT",1,"bottom-2 left-2"),l("RIGHT",2,"top-2 right-2"),l("RIGHT",1,"bottom-2 right-2"),(0,a.jsx)("p",{className:"font-black text-[90pt] leading-none flex items-center justify-center pt-2 pb-4",children:r||(0===r?"0":"--")})]})})()}),(0,a.jsx)("div",{className:"grid grid-cols-6 gap-1",children:t?.holes.map(e=>{let t=R.length>0?R:e4,r=t.some(t=>{let r=eP.get(t.id);return r&&r.has(e.holeNumber)}),n=ez===e.holeNumber,l=t.length>0&&!n&&!r&&e.holeNumber<ez,s="bg-white text-black border border-black";return n?s="bg-blue-600 text-white ring-2 ring-blue-600 ring-offset-1 z-10 scale-105 shadow-md":l?s="bg-[#ff3b30] text-white border-[#ff3b30]":r&&(s="bg-black text-white border border-black"),a.jsx("button",{onClick:()=>eT(e.holeNumber),className:`
                                            flex flex-col items-center justify-center py-3 rounded-2xl transition-all
                                            ${s}
                                        `,children:a.jsxs("div",{className:"flex items-baseline",children:[a.jsx("span",{className:"text-[20pt] font-black leading-none",children:e.holeNumber}),a.jsxs("span",{className:"text-[15pt] font-bold leading-none opacity-80",children:["/",e.par]})]})},e.holeNumber)})})]}),eL&&(0,a.jsxs)("div",{id:"scoring-section",className:"bg-white text-black rounded-xl shadow-lg border-2 border-black my-1 py-0 px-2",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-0",children:[(0,a.jsxs)("h2",{className:"text-[14pt] font-black text-gray-900 tracking-tight",children:["Players (",e2.length,")"]}),e2.length>0&&(0,a.jsx)("button",{onClick:()=>{if(!k||E)return;M(!0);let e=[],r=new Map(eP),a=e2.every(e=>{let t=eP.get(e.id);return t&&t.has(ez)}),n=[],l=[],s=t?.holes.find(e=>e.holeNumber===ez)?.par||4;e2.forEach(a=>{let o=new Map(r.get(a.id)||[]),i=er.get(a.id),d=o.get(ez),c=i??d??s;if(o.set(ez,c),r.set(a.id,o),e.push({playerId:a.id,strokes:c}),c===s-1){eI.current.has(a.id)||eI.current.set(a.id,new Set);let e=eI.current.get(a.id).has(ez);if(eI.current.get(a.id).add(ez),!e){let e=0;o.forEach((r,a)=>{let n=t?.holes.find(e=>e.holeNumber===a);r===(n?.par||4)-1&&e++}),n.push({name:a.name,totalBirdies:e})}}if(c<=s-2){eE.current.has(a.id)||eE.current.set(a.id,new Set);let e=eE.current.get(a.id).has(ez);if(eE.current.get(a.id).add(ez),!e){let e=0;o.forEach((r,a)=>{let n=t?.holes.find(e=>e.holeNumber===a);r<=(n?.par||4)-2&&e++}),l.push({name:a.name,totalEagles:e})}}}),eR(r),n.length>0&&X(n),l.length>0&&Z(l),ea(new Map),et(!1);let o=ez;if(!a){if(ez<18)o=ez+1;else{let e=1;for(let t=1;t<=18;t++)if(e2.some(e=>{let a=r.get(e.id);return!a||!a.has(t)})){e=t;break}o=e}eT(o),eD(!1)}M(!1),e.length>0&&ew({liveRoundId:k,holeNumber:ez,playerScores:e,scorerId:ef}).then(e=>{if(!e.success){console.error("Save failed:",e.error),e.error&&e.error.includes("locked by another device")?(eh("Error",e.error),j.refresh()):eh("Error","Failed to save scores: "+(e.error||"Unknown error"));return}j.refresh()}).catch(e=>{console.error("Background save failed:",e),eh("Error","Failed to save scores to server. Please check your connection.")})},disabled:E,className:`${(()=>{let e=e2.every(e=>{let t=eP.get(e.id);return t&&t.has(ez)});return ee||!e?"bg-blue-600 hover:bg-blue-700":"bg-black hover:bg-gray-800"})()} w-auto whitespace-nowrap text-white font-bold px-8 py-2 mt-1 rounded-full shadow-sm transition-colors text-[20pt] flex items-center justify-center gap-2 ${E?"opacity-70 disabled:cursor-not-allowed":""}`,children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("span",{className:E?"invisible":"visible",children:["Save Hole ",ez]}),E&&(0,a.jsx)("span",{className:"absolute inset-0 flex items-center justify-center",children:"Saving"})]})})]}),(0,a.jsx)("div",{className:"space-y-0",children:[...e2].map((e,r)=>{let n=eH(e.id,ez),l=eP.get(e.id),s=0,o=0;l&&l.forEach((e,r)=>{s+=e;let a=t?.holes.find(e=>e.holeNumber===r)?.par||4;o+=a});eq(e);let i=e4.findIndex(t=>t.id===e.id);return -1!==i&&e4[i].thru,(0,a.jsxs)("div",{className:"flex justify-between items-center bg-gray-50 rounded-xl py-0 px-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)("div",{className:"flex flex-col items-start leading-tight",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("div",{className:"font-bold text-gray-900 text-[18pt] leading-tight",children:eU(e.name).first}),(()=>{let t=eG(e);if(!t)return null;let r=t.name.toLowerCase().includes("white")?"W":t.name.toLowerCase().includes("gold")?"G":t.name.charAt(0).toUpperCase(),n="W"===r?"bg-gray-200 text-gray-800":"G"===r?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-600";return(0,a.jsx)("span",{className:`text-[12pt] font-black px-1.5 rounded ${n}`,children:r})})()]}),(0,a.jsx)("div",{className:"text-gray-700 text-[15pt] leading-tight",children:eU(e.name).last})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("button",{onClick:()=>eX(r,"up"),disabled:0===r,className:`w-8 h-8 rounded-full flex items-center justify-center shadow-md active:scale-95 transition-all ${0===r?"bg-gray-300 cursor-not-allowed":"bg-green-600 text-white hover:bg-green-700"}`,title:"Move Up",children:(0,a.jsx)("svg",{viewBox:"0 0 24 24",className:"w-6 h-6",fill:"currentColor",children:(0,a.jsx)("path",{d:"M7 14l5-5 5 5z"})})}),(e.isGuest||e.id.startsWith("guest-"))&&eL&&(0,a.jsx)("button",{onClick:()=>{O({id:e.id,name:e.name,index:e.index,courseHandicap:e.liveRoundData?.course_hcp||0}),D(!0)},className:"ml-1 text-blue-600 hover:text-blue-800 text-[12pt] font-semibold",children:"✏️"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[eL&&(0,a.jsx)("button",{onClick:()=>eZ(e.id,!1),className:"w-12 h-12 rounded-full bg-[#ff3b30] flex items-center justify-center text-white font-bold shadow-md active:scale-95 transition-transform text-[30pt]",children:"-"}),(0,a.jsx)("div",{className:"w-16 text-center font-bold text-[40pt] text-gray-800",children:n||(0,a.jsx)("span",{className:"text-gray-800",children:eO})}),eL&&(0,a.jsx)("button",{onClick:()=>eZ(e.id,!0),className:"w-12 h-12 rounded-full bg-[#00c950] flex items-center justify-center text-white font-bold shadow-md active:scale-95 transition-transform text-[30pt]",children:"+"})]})]},e.id)})}),0===e2.length&&(0,a.jsxs)("div",{className:"py-8 text-center bg-gray-50 rounded-xl border border-dashed border-gray-300 mb-2",children:[(0,a.jsx)("p",{className:"text-gray-500 font-bold text-[15pt] mb-4",children:"No players selected for scoring."}),(0,a.jsx)("button",{onClick:()=>e$(!0),className:"bg-black text-white px-6 py-2 rounded-full font-bold text-[15pt] shadow-md active:scale-95 transition-all",children:"Add Players / Join"})]})]}),(0,a.jsx)("div",{className:"pt-4"}),e1.length>0?(0,a.jsxs)("div",{id:"summary-section",className:"mt-1 space-y-2",children:[(0,a.jsxs)("div",{className:"flex gap-2 my-1",children:[(0,a.jsxs)("button",{onClick:()=>j.refresh(),className:"flex-1 bg-black text-white rounded-full py-2 text-[15pt] font-bold hover:bg-gray-800 transition-colors shadow-md active:scale-95",children:["Leaderboard (",e1.length,") - Refresh"]}),C&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:async()=>{let e=u.find(e=>e.id===k),r=e?.name||"Live Scorecard",a=`${r}

Leaderboard

`,n=`
                                                <div style="font-family: sans-serif; background-image: linear-gradient(#ffffff, #ffffff) !important; background-color: #ffffff !important; color: #000000 !important; margin: 0; padding: 0;">
                                                    <!-- ID: ${Date.now()} -->
                                                    <meta name="color-scheme" content="light only">
                                                    <meta name="supported-color-schemes" content="light only">
                                                    <table width="100%" height="100%" bgcolor="#ffffff" cellpadding="0" cellspacing="0" border="0" style="background-image: linear-gradient(#ffffff, #ffffff) !important; background-color: #ffffff !important;">
                                                        <tr>
                                                            <td align="center" valign="top" style="padding: 1px; background-image: linear-gradient(#ffffff, #ffffff) !important; background-color: #ffffff !important;">
                                                                <div style="max-width: 600px; text-align: center; margin: 0 auto; background-image: linear-gradient(#ffffff, #ffffff) !important; background-color: #ffffff !important;">
                                                                    <h2 style="margin: 0; font-size: 11pt; font-weight: bold; color: #000000 !important;">${r.replace("New Orleans","")}</h2>
                                                                    <br>
                                                                    <h2 style="margin: 0; font-size: 11pt; font-weight: bold; color: #000000 !important;">Leaderboard</h2>
                                                                </div>
                                                `;e4.forEach((e,r)=>{let a="E",l="#16a34a";e.toPar>0?(a=`+${e.toPar}`,l="#000000"):e.toPar<0&&(a=`${e.toPar}`,l="#dc2626");let{first:s,last:o}=eU(e.name),i=eG(e),d=i?i.name.toLowerCase().includes("white")?"W":i.name.toLowerCase().includes("gold")?"G":i.name.charAt(0).toUpperCase():"";n+=`
                                                    <table width="100%" bgcolor="#ffffff" cellpadding="0" cellspacing="0" border="0" style="box-shadow: 0 1px 3px rgba(0,0,0,0.1); border-radius: 8px; margin-bottom: 8px; border: 2px solid #d1d5db;">
                                                        <tr>
                                                            <td>
                                                                <div style="background: #1d4ed8; padding: 1px; color: white;">
                                                                    <table width="100%" cellpadding="1" cellspacing="0" border="0" style="color: white;">
                                                                        <tr>
                                                                            <td align="left" style="vertical-align: middle; padding: 1px;">
                                                                                <table cellpadding="1" cellspacing="0" border="0" style="color: white;">
                                                                                    <tr>
                                                                                        <td style="font-weight: bold; font-size: 13pt; line-height: 1.1; color: white;">${s}</td>
                                                                                        <td style="padding-left: 2px;">
                                                                                            ${d?`<span style="font-size: 11pt; font-weight: 900; padding: 1px 3px; border-radius: 2px; background: ${"W"===d?"#e5e7eb; color: #1f2937":"#fef3c7; color: #92400e"}; border: 1px solid #000;">${d}</span>`:""}
                                                                                        </td>
                                                                                    </tr>
                                                                                    <tr>
                                                                                        <td colspan="2" style="font-size: 11pt; line-height: 1.1; opacity: 0.9; color: white;">${o}</td>
                                                                                    </tr>
                                                                                </table>
                                                                            </td>
                                                                            <td align="right" style="vertical-align: middle; padding: 1px;">
                                                                                <table cellpadding="1" cellspacing="0" border="0" style="color: white;">
                                                                                    <tr>
                                                                                        <td style="background-image: linear-gradient(#ffffff, #ffffff) !important; background-color: #ffffff !important; color: ${l} !important; font-weight: bold; border-radius: 4px; padding: 2px 4px; font-size: 11pt; text-align: center; min-width: 40px; border: 1px solid #000;">
                                                                                            ${a}
                                                                                        </td>
                                                                                        <td style="text-align: center; padding-left: 4px;">
                                                                                            <div style="font-size: 11pt; font-weight: bold; opacity: 0.8; color: white;">GRS</div>
                                                                                            <div style="font-size: 11pt; font-weight: bold; color: white;">${e.totalGross}</div>
                                                                                        </td>
                                                                                        <td style="text-align: center; padding-left: 4px;">
                                                                                            <div style="font-size: 11pt; font-weight: bold; opacity: 0.8; color: white;">HCP</div>
                                                                                            <div style="font-size: 11pt; font-weight: bold; color: white;">${e.strokesReceivedSoFar}</div>
                                                                                        </td>
                                                                                        <td style="text-align: center; padding-left: 4px;">
                                                                                            <div style="font-size: 11pt; font-weight: bold; opacity: 0.8; color: white;">NET</div>
                                                                                            <div style="font-size: 11pt; font-weight: bold; color: white;">${e.totalNet}</div>
                                                                                        </td>
                                                                                    </tr>
                                                                                </table>
                                                                            </td>
                                                                        </tr>
                                                                    </table>
                                                                </div>
                                                                <div style="padding: 1px; border-top: 1px solid #000;">
                                                                    <table width="100%" cellpadding="1" cellspacing="0" border="0" style="border-collapse: collapse;" bgcolor="#ffffff">
                                                                        <tr style="border-bottom: 1px solid #000;">
                                                    `;for(let r=1;r<=9;r++){let a=eW(e.id,r),l=t?.holes.find(e=>e.holeNumber===r)?.par||4,s="#ffffff";if(null!==a){let e=a-l;e<=-2?s="#fde047":-1===e?s="#86efac":0===e?s="#ffffff":1===e?s="#fed7aa":e>=2&&(s="#fca5a5")}n+=`
                                                            <td style="border-right: 1px solid #000; text-align: center; padding: 1px; background-image: linear-gradient(${s}, ${s}) !important; background-color: ${s} !important;" bgcolor="${s}">
                                                                <div style="font-size: 11pt; color: #000000 !important; line-height: 1.1;">${r}/${l}</div>
                                                                <div style="font-size: 11pt; font-weight: bold; color: #000000 !important; line-height: 1.1;">${a||"-"}</div>
                                                            </td>
                                                        `}n+="</tr><tr>";for(let r=10;r<=18;r++){let a=eW(e.id,r),l=t?.holes.find(e=>e.holeNumber===r)?.par||4,s="#ffffff";if(null!==a){let e=a-l;e<=-2?s="#fde047":-1===e?s="#86efac":0===e?s="#ffffff":1===e?s="#fed7aa":e>=2&&(s="#fca5a5")}n+=`
                                                            <td style="border-right: 1px solid #000; text-align: center; padding: 1px; background-image: linear-gradient(${s}, ${s}) !important; background-color: ${s} !important;" bgcolor="${s}">
                                                                <div style="font-size: 11pt; color: #000000 !important; line-height: 1.1;">${r}/${l}</div>
                                                                <div style="font-size: 11pt; font-weight: bold; color: #000000 !important; line-height: 1.1;">${a||"-"}</div>
                                                            </td>
                                                        `}n+="</tr></table></div></td></tr></table>"}),n+=`
                                                            <div style="display:none; color: #ffffff !important; font-size: 1pt; overflow: hidden; height: 0; width: 0; line-height: 0;">ID: ${Date.now()}</div>
                                                            </td>
                                                        </tr>
                                                    </table>
                                                </div>`;try{let e=new Blob([n],{type:"text/html"}),t=new Blob([a],{type:"text/plain"});await navigator.clipboard.write([new ClipboardItem({"text/html":e,"text/plain":t})]),eh("Copied!","Scorecard copied to clipboard")}catch(e){console.error("Failed to copy: ",e),eh("Error","Failed to copy scorecard")}},className:"flex items-center justify-center p-2 bg-black text-white rounded-full hover:bg-gray-800 transition-colors shadow-sm cursor-pointer",title:"Copy Scorecard",children:(0,a.jsx)(o,{size:20})}),(0,a.jsx)("button",{onClick:async()=>{if(!r?.players){eh("No Players","No players found in this round.");return}let t=new Set;r.players.forEach(r=>{if(r.player?.email)t.add(r.player.email);else if(r.player?.id){let a=e.find(e=>e.id===r.player.id);a?.email&&t.add(a.email)}});let a=Array.from(t).join("; ");if(!a){eh("No Emails","No emails found for players in this round.");return}try{await navigator.clipboard.writeText(a),eh("Copied!","All player emails from the round copied to clipboard")}catch(e){console.error("Failed to copy emails: ",e),eh("Error","Failed to copy emails")}},className:"flex items-center justify-center p-2 bg-black text-white rounded-full hover:bg-gray-800 transition-colors shadow-sm cursor-pointer",title:"Copy Emails",children:(0,a.jsx)(i.A,{size:20})}),(0,a.jsx)("button",{onClick:async()=>{let a=u.find(e=>e.id===k),n=a?.name||"Live Scorecard",l=new Set;r?.players?r.players.forEach(t=>{if(t.player?.email)l.add(t.player.email);else if(t.player?.id){let r=e.find(e=>e.id===t.player.id);r?.email&&l.add(r.email)}}):e4.forEach(t=>{let r=e.find(e=>e.id===t.id);r?.email?l.add(r.email):t.email&&l.add(t.email)});let s=Array.from(l).join("; ");if(!s){eh("No Emails","No player emails found to send to.");return}ex("Send Scorecard?",`Send scorecard to: ${s}?`,async()=>{let e=`
                                                    <!DOCTYPE html>
                                                    <html>
                                                    <body style="margin:0;padding:0;background:#ffffff;font-family:Arial,Helvetica,sans-serif;">
                                                    <table width="100%" cellpadding="0" cellspacing="0" bgcolor="#ffffff">
                                                        <tr>
                                                            <td align="center" style="padding: 0;">
                                                                <!-- CONTAINER -->
                                                                <table width="100%" cellpadding="0" cellspacing="0" style="max-width:600px;border-collapse:collapse;">
                                                                    <!-- TITLE -->
                                                                    <tr>
                                                                        <td style="padding:12px;background:#000000;color:#ffffff;font-size:18px;font-weight:bold;text-align:center;">
                                                                            ${n.replace("New Orleans","")}<br/>
                                                                            Leaderboard
                                                                            <!-- ID: ${Date.now()} -->
                                                                        </td>
                                                                    </tr>
                                                    `;e4.forEach((r,a)=>{let{first:n,last:l}=eU(r.name),s=0;for(let e=1;e<=9;e++){let t=eW(r.id,e);t&&(s+=t)}let o=0;for(let e=10;e<=18;e++){let t=eW(r.id,e);t&&(o+=t)}let i=r.courseHcp,d=eG(r),c=d?d.name.toLowerCase().includes("white")?"W":d.name.toLowerCase().includes("gold")?"G":d.name.charAt(0).toUpperCase():"",u="E";r.toPar>0?u=`+${r.toPar}`:r.toPar<0&&(u=`${r.toPar}`),e+=`
                                                        <!-- PLAYER SPACER -->
                                                        <tr><td height="12"></td></tr>
                                                        
                                                        <!-- PLAYER CARD -->
                                                        <tr>
                                                            <td style="border:1px solid #CCCCCC;">
                                                                <table width="100%" cellpadding="0" cellspacing="0" style="border-collapse:collapse;">
                                                                    <!-- PLAYER HEADER -->
                                                                    <tr>
                                                                        <td style="padding:8px;background:#1F4FD8;background-image:linear-gradient(#1F4FD8,#1F4FD8);color:#ffffff;">
                                                                            <table width="100%" cellpadding="0" cellspacing="0">
                                                                                <tr>
                                                                                    <!-- NAME (Bottom-Left, Stacked) -->
                                                                                    <td style="color:#ffffff;font-size:16px;font-weight:bold;line-height:1.2;">
                                                                                        ${n}<br/>
                                                                                        ${l}
                                                                                        ${c?`<span style="background:#ffffff;color:#000;padding:1px 4px;border-radius:3px;font-size:10px;margin-left:4px;vertical-align:middle;">${c}</span>`:""}
                                                                                    </td>
                                                                                    
                                                                                    <!-- STATS (Right) -->
                                                                                    <td align="right" style="vertical-align:bottom;">
                                                                                        <table cellpadding="0" cellspacing="0">
                                                                                            <tr>
                                                                                                <!-- TO PAR BADGE -->
                                                                                                <td valign="bottom" style="padding-right:8px;padding-bottom:2px;">
                                                                                                    <span style="background:#ffffff;color:#000000;padding:3px 6px;border-radius:4px;font-weight:bold;font-size:14px;display:inline-block;">${u}</span>
                                                                                                </td>
                                                                                                
                                                                                                <!-- STATS GRID -->
                                                                                                <td>
                                                                                                    <table cellpadding="0" cellspacing="0">
                                                                                                        <tr>
                                                                                                            <td align="center" style="padding:0 4px;color:#cbd5e1;font-size:9px;font-weight:bold;text-transform:uppercase;">GRS</td>
                                                                                                            <td align="center" style="padding:0 4px;color:#cbd5e1;font-size:9px;font-weight:bold;text-transform:uppercase;">HCP</td>
                                                                                                            <td align="center" style="padding:0 4px;color:#cbd5e1;font-size:9px;font-weight:bold;text-transform:uppercase;">NET</td>
                                                                                                        </tr>
                                                                                                        <tr>
                                                                                                            <td align="center" style="padding:0 4px;color:#ffffff;font-size:14px;font-weight:bold;">${s}+${o}=${r.totalGross}</td>
                                                                                                            <td align="center" style="padding:0 4px;color:#ffffff;font-size:14px;font-weight:bold;">${i}/${i}</td>
                                                                                                            <td align="center" style="padding:0 4px;color:#ffffff;font-size:14px;font-weight:bold;">${r.totalNet}</td>
                                                                                                        </tr>
                                                                                                    </table>
                                                                                                </td>
                                                                                            </tr>
                                                                                        </table>
                                                                                    </td>
                                                                                </tr>
                                                                            </table>
                                                                        </td>
                                                                    </tr>
                                                                    
                                                                    <!-- SCORES -->
                                                                    <tr>
                                                                        <td>
                                                                            <table width="100%" cellpadding="0" cellspacing="0" style="border-collapse:collapse;table-layout:fixed;">
                                                                                <!-- Row 1: Front 9 -->
                                                                                <tr>
                                                        `;for(let a=1;a<=9;a++){let n=eW(r.id,a),l=t?.holes.find(e=>e.holeNumber===a)?.par||4,s="#F2F2F2",o="#000000";if(null!==n){let e=n-l;e<=-1?(s=e<=-2?"#fde047":"#86efac",o="#000000"):0===e?(s="#ffffff",o="#000000"):1===e?(s="#fed7aa",o="#000000"):e>=2&&(s="#fca5a5",o="#000000")}e+=`
                                                            <td style="border:1px solid #CCCCCC;background:${s};background-image:linear-gradient(${s},${s});text-align:center;padding:8px 0;width:11.11%;">
                                                                <div style="font-size:11px;color:${o};opacity:0.8;">${a}/${l}</div>
                                                                <div style="font-size:14px;font-weight:bold;color:${o};">${n||"-"}</div>
                                                            </td>
                                                            `}e+="</tr>\x3c!-- Row 2: Back 9 --\x3e<tr>";for(let a=10;a<=18;a++){let n=eW(r.id,a),l=t?.holes.find(e=>e.holeNumber===a)?.par||4,s="#F2F2F2",o="#000000";if(null!==n){let e=n-l;e<=-1?(s=e<=-2?"#fde047":"#86efac",o="#000000"):0===e?(s="#ffffff",o="#000000"):1===e?(s="#fed7aa",o="#000000"):e>=2&&(s="#fca5a5",o="#000000")}e+=`
                                                            <td style="border:1px solid #CCCCCC;background:${s};background-image:linear-gradient(${s},${s});text-align:center;padding:8px 0;width:11.11%;">
                                                                <div style="font-size:11px;color:${o};opacity:0.8;">${a}/${l}</div>
                                                                <div style="font-size:14px;font-weight:bold;color:${o};">${n||"-"}</div>
                                                            </td>
                                                            `}e+=`
                                                                                </tr>
                                                                            </table>
                                                                        </td>
                                                                    </tr>
                                                                </table>
                                                            </td>
                                                        </tr>
                                                        `}),e+=`
                                                                </table>
                                                                <!-- BOTTOM ID to prevent grouping -->
                                                                <div style="display:none;font-size:1px;color:#ffffff;">ID: ${Date.now()}</div>
                                                            </td>
                                                        </tr>
                                                    </table>
                                                    </body>
                                                    </html>`;let r=await ek(s,"*** For Testing *** CPGC Leaderboard",e,"*** For Testing *** CPGC Leaderboard");r.success||eh("Failed",`Error: ${r.error}`)})},className:"flex items-center justify-center p-2 bg-blue-600 text-white rounded-full hover:bg-blue-700 transition-colors shadow-sm cursor-pointer",title:"Send Scorecard to All Players",children:(0,a.jsx)(d,{size:20})})]}),(0,a.jsx)("button",{onClick:()=>G(!0),className:"w-16 h-12 bg-black text-white rounded-full flex items-center justify-center hover:bg-gray-800 transition-colors shadow-md active:scale-95",children:(0,a.jsx)(c,{size:32})}),(0,a.jsx)("button",{onClick:()=>Y(!0),className:"px-4 py-2 rounded-full text-[15pt] font-bold transition-colors shadow-sm cursor-pointer whitespace-nowrap bg-black text-white border-2 border-black hover:bg-gray-800",children:"$5 Pool"})]}),(0,a.jsx)("div",{className:"space-y-1",children:e4.map((e,r)=>{let n="E",l="text-green-600";return e.toPar>0?(n=`+${e.toPar}`,l="text-gray-900"):e.toPar<0&&(n=`${e.toPar}`,l="text-red-600"),e.thru,(0,a.jsxs)("div",{className:"bg-white text-black shadow-lg rounded-xl overflow-hidden my-1 border-4 border-gray-300",children:[(0,a.jsx)("div",{className:"bg-[#1d4ed8] p-1 text-white",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsxs)("div",{className:"font-bold text-[16pt] leading-tight flex items-center gap-1",children:[eU(e.name).first,(()=>{let t=eG(e);if(!t)return null;let r=t.name.toLowerCase().includes("white")?"W":t.name.toLowerCase().includes("gold")?"G":t.name.charAt(0).toUpperCase(),n="W"===r?"bg-gray-200 text-gray-800":"G"===r?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-600";return(0,a.jsx)("span",{className:`text-[10pt] font-black px-1.5 py-0.5 rounded ${n}`,children:r})})()]}),(0,a.jsx)("div",{className:"text-[13pt] leading-tight opacity-90",children:eU(e.name).last})]}),(0,a.jsx)("div",{className:"flex items-center"})]}),(0,a.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,a.jsx)("div",{className:`bg-white font-bold rounded px-2 h-8 flex items-center justify-center text-[18pt] min-w-[3rem] ${l}`,children:n}),(0,a.jsxs)("div",{className:"text-left",children:[(0,a.jsx)("div",{className:"text-[12pt] opacity-80 font-bold tracking-wider",children:"GRS"}),(0,a.jsx)("div",{className:"text-[15pt] font-bold leading-none",children:e.front9>0||e.back9>0?(0,a.jsxs)(a.Fragment,{children:[e.front9,"+",e.back9,"=",e.totalGross]}):(0,a.jsx)(a.Fragment,{children:e.totalGross})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-[12pt] opacity-80 font-bold tracking-wider",children:"HCP"}),(0,a.jsxs)("div",{className:"text-[15pt] font-bold leading-none",children:[e.strokesReceivedSoFar,"/",e.courseHcp]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-[12pt] opacity-80 font-bold tracking-wider",children:"NET"}),(0,a.jsx)("div",{className:"text-[15pt] font-bold leading-none",children:e.totalNet})]})]})]})}),(0,a.jsxs)("div",{className:"p-1 border border-black rounded shadow-sm overflow-hidden",children:[(0,a.jsx)("div",{className:"grid grid-cols-9 border-b border-black",children:[1,2,3,4,5,6,7,8,9].map(r=>{let n=eW(e.id,r),l=ez===r,s=t?.holes.find(e=>e.holeNumber===r),o=s?.par||4,i="bg-white";if(null!==n){let e=n-o;e<=-2?i="bg-yellow-300":-1===e?i="bg-green-300":0===e?i="bg-white":1===e?i="bg-orange-200":e>=2&&(i="bg-red-300")}else l&&(i="bg-green-50");return(0,a.jsxs)("div",{onClick:()=>{C&&el({playerId:e.id,holeNumber:r})},className:`
                                                            flex flex-col items-center justify-center h-16 border-r border-black last:border-r-0 relative bg-white
                                                            ${l?"ring-2 ring-black ring-inset z-10":""}
                                                            ${C?"cursor-pointer hover:bg-gray-50":""}
                                                        `,children:[(0,a.jsxs)("div",{className:"absolute top-1 inset-x-0 flex justify-center px-1.5 text-gray-900 items-baseline gap-0.5",children:[(0,a.jsx)("span",{className:"text-[13pt] font-bold",children:r}),(0,a.jsxs)("span",{className:"text-[12pt] font-normal opacity-80",children:["/",o]})]}),C&&en?.playerId===e.id&&en?.holeNumber===r?(0,a.jsx)("input",{type:"number",inputMode:"numeric",autoFocus:!0,"aria-label":`Score for hole ${r}`,className:"text-[18pt] font-black w-full h-10 mt-6 text-center bg-blue-50 focus:outline-none border-t border-b border-blue-200 [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none",defaultValue:n||"",onFocus:e=>e.target.select(),onKeyDown:t=>{"Enter"===t.key?(e0(e.id,r,t.target.value),r<18?el({playerId:e.id,holeNumber:r+1}):el(null)):"Escape"===t.key&&el(null)},onBlur:t=>{e0(e.id,r,t.target.value),setTimeout(()=>{el(t=>t?.playerId===e.id&&t?.holeNumber===r?null:t)},100)}}):(0,a.jsx)("div",{className:`text-[16pt] font-bold px-2 py-0.5 rounded mt-7 ${i} ${null!==n?"text-gray-900 font-black":"text-gray-300 font-normal italic"}`,children:n||"-"})]},r)})}),(0,a.jsx)("div",{className:"grid grid-cols-9",children:[10,11,12,13,14,15,16,17,18].map(r=>{let n=eW(e.id,r),l=ez===r,s=t?.holes.find(e=>e.holeNumber===r),o=s?.par||4,i="bg-white";if(null!==n){let e=n-o;e<=-2?i="bg-yellow-300":-1===e?i="bg-green-300":0===e?i="bg-white":1===e?i="bg-orange-200":e>=2&&(i="bg-red-300")}else l&&(i="bg-green-50");return(0,a.jsxs)("div",{onClick:()=>{C&&el({playerId:e.id,holeNumber:r})},className:`
                                                            flex flex-col items-center justify-center h-16 border-r border-black last:border-r-0 relative bg-white
                                                            ${l?"ring-2 ring-black ring-inset z-10":""}
                                                            ${C?"cursor-pointer hover:bg-gray-50":""}
                                                        `,children:[(0,a.jsxs)("div",{className:"absolute top-1 inset-x-0 flex justify-center px-1.5 text-gray-900 items-baseline gap-0.5",children:[(0,a.jsx)("span",{className:"text-[13pt] font-bold",children:r}),(0,a.jsxs)("span",{className:"text-[12pt] font-normal opacity-80",children:["/",o]})]}),C&&en?.playerId===e.id&&en?.holeNumber===r?(0,a.jsx)("input",{type:"number",inputMode:"numeric",autoFocus:!0,"aria-label":`Score for hole ${r}`,className:"text-[18pt] font-black w-full h-10 mt-6 text-center bg-blue-50 focus:outline-none border-t border-b border-blue-200 [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none",defaultValue:n||"",onFocus:e=>e.target.select(),onKeyDown:t=>{"Enter"===t.key?(e0(e.id,r,t.target.value),r<18?el({playerId:e.id,holeNumber:r+1}):el(null)):"Escape"===t.key&&el(null)},onBlur:t=>{e0(e.id,r,t.target.value),setTimeout(()=>{el(t=>t?.playerId===e.id&&t?.holeNumber===r?null:t)},100)}}):(0,a.jsx)("div",{className:`text-[16pt] font-bold px-2 py-0.5 rounded mt-7 ${i} ${null!==n?"text-gray-900 font-black":"text-gray-300 font-normal italic"}`,children:n||"-"})]},r)})})]})]},e.id)})})]}):(0,a.jsx)("div",{className:"bg-white rounded-xl shadow-lg border-2 border-gray-300 p-8 text-center m-1",children:(0,a.jsx)("p",{className:"text-gray-500 font-bold text-[15pt]",children:"No players have joined this round yet."})},"no-players"),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-2 m-1 flex flex-wrap gap-x-6 gap-y-2 items-center justify-center text-[15pt]",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-5 h-5 rounded-full bg-yellow-300 shadow-sm"}),"(-2)"]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-5 h-5 rounded-full bg-green-300 shadow-sm"}),"(-1)"]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-5 h-5 rounded-full bg-white border-2 border-gray-300 shadow-sm"}),"(E)"]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-5 h-5 rounded-full bg-orange-200 shadow-sm"}),"(+1)"]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-5 h-5 rounded-full bg-red-300 shadow-sm"}),"(+2)"]})]})]}),(0,a.jsx)(w,{isOpen:U,onClose:()=>H(!1),players:C?e4:e4.filter(e=>e2.some(t=>t.id===e.id)),liveRoundId:k||"",onSave:eQ}),W&&(0,a.jsxs)("div",{className:"fixed inset-0 z-[300] bg-gray-50 overflow-y-auto",children:[(0,a.jsx)("div",{className:"bg-white shadow-sm sticky top-0 z-10 px-1 py-3 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h1",{className:"text-[18pt] font-bold text-gray-900 tracking-tight text-left ml-3",children:"Round Stats"}),(0,a.jsx)("button",{onClick:()=>G(!1),className:"px-1 py-2 bg-black text-white rounded-full text-[14pt] font-bold hover:bg-gray-800 transition-colors mr-3",children:"Close"})]})}),(0,a.jsxs)("div",{className:"p-3 space-y-4",children:[(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-3 border-2 border-green-500",children:[(0,a.jsxs)("h2",{className:"text-[16pt] font-bold text-green-700 mb-3 flex items-center gap-2",children:[(0,a.jsx)(c,{size:32,className:"text-green-600"})," Birdies (1 Under Par)"]}),(0,a.jsx)("div",{className:"space-y-2",children:e6.length>0?e6.map(e=>(0,a.jsxs)("div",{className:"flex justify-between items-center bg-green-50 rounded-lg p-2",children:[(0,a.jsx)("span",{className:"text-[15pt] font-bold text-gray-900",children:e.name}),(0,a.jsx)("span",{className:"text-[18pt] font-black text-green-700",children:e.birdieCount})]},e.id)):(0,a.jsx)("p",{className:"text-gray-500 text-center py-4",children:"No birdies yet"})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-3 border-2 border-yellow-500",children:[(0,a.jsx)("h2",{className:"text-[16pt] font-bold text-yellow-700 mb-3 flex items-center gap-2",children:"\uD83E\uDD85 Eagles (2 Under Par)"}),(0,a.jsx)("div",{className:"space-y-2",children:e8.length>0?e8.map(e=>(0,a.jsxs)("div",{className:"flex justify-between items-center bg-yellow-50 rounded-lg p-2",children:[(0,a.jsx)("span",{className:"text-[15pt] font-bold text-gray-900",children:e.name}),(0,a.jsx)("span",{className:"text-[18pt] font-black text-yellow-700",children:e.eagleCount})]},e.id)):(0,a.jsx)("p",{className:"text-gray-500 text-center py-4",children:"No eagles yet"})})]})]})]}),Q.length>0&&(0,a.jsx)("div",{className:"fixed inset-0 z-[400] flex items-center justify-center bg-black/70 animate-in fade-in duration-300",onClick:()=>X([]),children:(0,a.jsx)("div",{className:"animate-in zoom-in-95 duration-500 flex flex-col items-center gap-4",onClick:e=>e.stopPropagation(),children:(0,a.jsxs)("div",{className:"bg-white text-black rounded-2xl px-6 py-4 shadow-2xl flex flex-col items-center max-w-sm mx-4 border-4 border-green-500",children:[(0,a.jsx)("div",{className:"text-[100pt] leading-none mb-2",children:"\uD83D\uDC26"}),(0,a.jsx)("h1",{className:"text-[30pt] font-black text-green-600 mb-4 text-center leading-tight drop-shadow-sm uppercase italic",children:"Beautiful Birdie!"}),(0,a.jsx)("div",{className:"text-[18pt] font-bold text-gray-900 text-center mb-4 w-full",children:[...Q].sort((e,t)=>t.totalBirdies-e.totalBirdies).map((e,t)=>(0,a.jsxs)("div",{className:"mb-2 last:mb-0 border-b last:border-0 border-gray-100 pb-2 last:pb-0",children:[(0,a.jsx)("div",{className:"leading-tight",children:e.name}),(0,a.jsxs)("div",{className:"text-[14pt] text-green-600 font-bold leading-tight",children:[e.totalBirdies," ",1===e.totalBirdies?"Birdie":"Birdies"," Total"]})]},t))}),(0,a.jsx)("button",{onClick:e=>{e.stopPropagation(),X([])},className:"w-full bg-black text-white rounded-full py-2 text-[15pt] font-bold hover:bg-gray-800 transition-colors shadow-md active:scale-95",children:"Close"})]})})}),K.length>0&&(0,a.jsx)("div",{className:"fixed inset-0 z-[400] flex items-center justify-center bg-black/70 animate-in fade-in duration-300",onClick:()=>Z([]),children:(0,a.jsx)("div",{className:"animate-in zoom-in-95 duration-500 flex flex-col items-center gap-4",onClick:e=>e.stopPropagation(),children:(0,a.jsxs)("div",{className:"bg-white text-black rounded-2xl px-6 py-4 shadow-2xl flex flex-col items-center max-w-sm mx-4 border-4 border-yellow-400",children:[(0,a.jsx)("div",{className:"text-[100pt] leading-none mb-2",children:"\uD83E\uDD85"}),(0,a.jsx)("h1",{className:"text-[30pt] font-black text-yellow-500 mb-4 text-center leading-tight drop-shadow-sm uppercase italic",children:"Awesome Eagle!"}),(0,a.jsx)("div",{className:"text-[18pt] font-bold text-gray-900 text-center mb-4 w-full",children:[...K].sort((e,t)=>t.totalEagles-e.totalEagles).map((e,t)=>(0,a.jsxs)("div",{className:"mb-2 last:mb-0 border-b last:border-0 border-gray-100 pb-2 last:pb-0",children:[(0,a.jsx)("div",{className:"leading-tight",children:e.name}),(0,a.jsxs)("div",{className:"text-[14pt] text-yellow-600 font-bold leading-tight",children:[e.totalEagles," ",1===e.totalEagles?"Eagle":"Eagles"," Total"]})]},t))}),(0,a.jsx)("button",{onClick:e=>{e.stopPropagation(),Z([])},className:"w-full bg-black text-white rounded-full py-2 text-[15pt] font-bold hover:bg-gray-800 transition-colors shadow-md active:scale-95",children:"Close"})]})})}),U&&(0,a.jsx)(w,{isOpen:U,onClose:()=>H(!1),onSave:async()=>{H(!1)},players:e,liveRoundId:k||""}),q&&k&&(0,a.jsx)(eb,{roundId:k,isOpen:q,onClose:()=>Y(!1)}),ec&&(0,a.jsx)(g,{isOpen:ec.isOpen,title:ec.title,message:ec.message,isDestructive:ec.isDestructive,confirmText:ec.confirmText,cancelText:ec.cancelText,hideCancel:ec.hideCancel,onConfirm:ec.onConfirm,onCancel:()=>eu(null)})]}):(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50 pb-20",children:[(0,a.jsx)("header",{className:"bg-white shadow-sm sticky top-0 z-50 px-4 py-3 flex justify-between items-center",children:(0,a.jsx)("h1",{className:"text-xl font-bold text-green-700",children:"Live Scoring"})}),(0,a.jsx)("main",{className:"p-4 flex flex-col items-center justify-center mt-10 space-y-6",children:(0,a.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-lg border-2 border-dashed border-gray-300 text-center max-w-sm w-full",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"No Active Round"}),(0,a.jsx)("p",{className:"text-gray-500 mb-6",children:"There is no round currently in progress."}),(0,a.jsx)("button",{onClick:()=>{T("new"),_(!0)},className:"w-full bg-green-600 text-white text-lg font-bold py-3 rounded-xl shadow-md hover:bg-green-700 transition",children:"Start New Round"}),u.length>0&&(0,a.jsxs)("div",{className:"mt-6 pt-6 border-t border-gray-100",children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-gray-500 mb-2",children:"Or Resume Existing Round:"}),(0,a.jsxs)("select",{className:"w-full p-2 border rounded-lg bg-gray-50 text-lg text-black","aria-label":"Resume Existing Round",title:"Resume Existing Round",onChange:e=>{e.target.value&&(window.location.href=`/live?roundId=${e.target.value}`)},defaultValue:"",children:[(0,a.jsx)("option",{value:"",disabled:!0,children:"-- Select Round --"}),u.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]})]})]})})]})}},29555:(e,t,r)=>{"use strict";r.d(t,{default:()=>a});let a=(0,r(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\viet4\\\\antigravity\\\\g-golfls-app\\\\app\\\\live\\\\LiveScoreClient.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\viet4\\antigravity\\g-golfls-app\\app\\live\\LiveScoreClient.tsx","default")},6610:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u,dynamic:()=>i,fetchCache:()=>c,revalidate:()=>d});var a=r(62740),n=r(11587),l=r(29555),s=r(67359),o=r(44512);let i="force-dynamic",d=0,c="force-no-store";async function u(e){let t=(await e.searchParams).roundId,r=await (0,o.UL)(),i=r.get("auth_status")?.value==="true",d=(await r).get("session_userId")?.value;i&&d||(0,s.redirect)("/login");let c=(await r).get("admin_session")?.value==="true",u=await n.z.course.findFirst({where:{name:{contains:"City Park North"}},include:{teeBoxes:!0,holes:{include:{elements:!0},orderBy:{holeNumber:"asc"}}}});u||(u=await n.z.course.findFirst({include:{teeBoxes:!0,holes:{include:{elements:!0},orderBy:{holeNumber:"asc"}}}}));let f=await n.z.course.findMany({include:{teeBoxes:!0,holes:{include:{elements:!0},orderBy:{holeNumber:"asc"}}},orderBy:{name:"asc"}}),p=new Intl.DateTimeFormat("en-CA",{timeZone:"America/Chicago",year:"numeric",month:"2-digit",day:"2-digit"}).format(new Date),h=null,x=null,b=null,m=await n.z.liveRoundPlayer.findFirst({where:{playerId:d},orderBy:{liveRound:{date:"desc"}},include:{liveRound:!0}});if(m&&(x=m.liveRound.courseId,b=m.teeBoxId),t&&(h=await n.z.liveRound.findUnique({where:{id:t},include:{players:{include:{player:!0,scores:{include:{hole:!0}}}}}})),!h&&m&&(h=await n.z.liveRound.findUnique({where:{id:m.liveRoundId},include:{players:{include:{player:!0,scores:{include:{hole:!0}}}}}})),!h){let e=await n.z.liveRound.findMany({orderBy:{date:"desc"},take:20,select:{id:!0,date:!0}}),t=e.find(e=>{let[t,r,a]=e.date.split("-").map(Number);return 6===new Date(t,r-1,a).getDay()}),r=t?t.id:e[0]?.id;r&&(h=await n.z.liveRound.findUnique({where:{id:r},include:{players:{include:{player:!0,scores:{include:{hole:!0}}}}}}))}if(h||console.log("LOG-13: No rounds exist. Rendering empty state."),!t&&h)return(0,s.redirect)(`/?roundId=${h.id}`);if(h?.courseId){let e=await n.z.course.findUnique({where:{id:h.courseId},include:{teeBoxes:!0,holes:{include:{elements:!0},orderBy:{holeNumber:"asc"}}}});e&&(u=e)}let g=await n.z.liveRound.findMany({where:{},orderBy:{createdAt:"desc"},select:{id:!0,name:!0,date:!0,createdAt:!0}}),y=(await r).get("session_userId")?.value,w=[],v=(await n.z.player.findMany({orderBy:{name:"asc"},select:{id:!0,name:!0,handicapIndex:!0,preferredTeeBox:!0,email:!0}})).map(e=>({...e,index:e.handicapIndex,preferred_tee_box:e.preferredTeeBox}));if(y&&!c){let e=(await n.z.liveRoundPlayer.findMany({where:{playerId:y},select:{liveRoundId:!0}})).map(e=>e.liveRoundId),t=new Set((await n.z.liveRoundPlayer.findMany({where:{liveRoundId:{in:e}},select:{playerId:!0}})).map(e=>e.playerId).filter(e=>null!==e));t.add(y),w=v.filter(e=>t.has(e.id))}else w=v;return(0,a.jsx)(l.default,{allPlayers:w,defaultCourse:u?JSON.parse(JSON.stringify(u)):null,allCourses:JSON.parse(JSON.stringify(f)),initialRound:h?JSON.parse(JSON.stringify(h)):null,todayStr:p,allLiveRounds:g.map(e=>({...e,created_at:e.createdAt.toISOString()})),isAdmin:c,currentUserId:d,lastUsedCourseId:x,lastUsedTeeBoxId:b})}},46347:(e,t,r)=>{"use strict";function a(){throw Error("`forbidden()` is experimental and only allowed to be enabled when `experimental.authInterrupts` is enabled.")}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"forbidden",{enumerable:!0,get:function(){return a}}),r(26003).HTTP_ERROR_FALLBACK_ERROR_CODE,("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},11271:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isNextRouterError",{enumerable:!0,get:function(){return l}});let a=r(26003),n=r(23543);function l(e){return(0,n.isRedirectError)(e)||(0,a.isHTTPAccessFallbackError)(e)}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},67359:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{ReadonlyURLSearchParams:function(){return c},RedirectType:function(){return n.RedirectType},forbidden:function(){return s.forbidden},notFound:function(){return l.notFound},permanentRedirect:function(){return a.permanentRedirect},redirect:function(){return a.redirect},unauthorized:function(){return o.unauthorized},unstable_rethrow:function(){return i.unstable_rethrow}});let a=r(26552),n=r(23543),l=r(39274),s=r(46347),o=r(10590),i=r(51370);class d extends Error{constructor(){super("Method unavailable on `ReadonlyURLSearchParams`. Read more: https://nextjs.org/docs/app/api-reference/functions/use-search-params#updating-searchparams")}}class c extends URLSearchParams{append(){throw new d}delete(){throw new d}set(){throw new d}sort(){throw new d}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},39274:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"notFound",{enumerable:!0,get:function(){return n}});let a=""+r(26003).HTTP_ERROR_FALLBACK_ERROR_CODE+";404";function n(){let e=Error(a);throw e.digest=a,e}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},23543:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{REDIRECT_ERROR_CODE:function(){return n},RedirectType:function(){return l},isRedirectError:function(){return s}});let a=r(11541),n="NEXT_REDIRECT";var l=function(e){return e.push="push",e.replace="replace",e}({});function s(e){if("object"!=typeof e||null===e||!("digest"in e)||"string"!=typeof e.digest)return!1;let t=e.digest.split(";"),[r,l]=t,s=t.slice(2,-2).join(";"),o=Number(t.at(-2));return r===n&&("replace"===l||"push"===l)&&"string"==typeof s&&!isNaN(o)&&o in a.RedirectStatusCode}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},11541:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RedirectStatusCode",{enumerable:!0,get:function(){return r}});var r=function(e){return e[e.SeeOther=303]="SeeOther",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect",e}({});("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},26552:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{getRedirectError:function(){return s},getRedirectStatusCodeFromError:function(){return u},getRedirectTypeFromError:function(){return c},getURLFromRedirectError:function(){return d},permanentRedirect:function(){return i},redirect:function(){return o}});let a=r(19121),n=r(11541),l=r(23543);function s(e,t,r){void 0===r&&(r=n.RedirectStatusCode.TemporaryRedirect);let a=Error(l.REDIRECT_ERROR_CODE);return a.digest=l.REDIRECT_ERROR_CODE+";"+t+";"+e+";"+r+";",a}function o(e,t){let r=a.actionAsyncStorage.getStore();throw s(e,t||((null==r?void 0:r.isAction)?l.RedirectType.push:l.RedirectType.replace),n.RedirectStatusCode.TemporaryRedirect)}function i(e,t){throw void 0===t&&(t=l.RedirectType.replace),s(e,t,n.RedirectStatusCode.PermanentRedirect)}function d(e){return(0,l.isRedirectError)(e)?e.digest.split(";").slice(2,-2).join(";"):null}function c(e){if(!(0,l.isRedirectError)(e))throw Error("Not a redirect error");return e.digest.split(";",2)[1]}function u(e){if(!(0,l.isRedirectError)(e))throw Error("Not a redirect error");return Number(e.digest.split(";").at(-2))}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},10590:(e,t,r)=>{"use strict";function a(){throw Error("`unauthorized()` is experimental and only allowed to be used when `experimental.authInterrupts` is enabled.")}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"unauthorized",{enumerable:!0,get:function(){return a}}),r(26003).HTTP_ERROR_FALLBACK_ERROR_CODE,("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},51370:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"unstable_rethrow",{enumerable:!0,get:function(){return function e(t){if((0,s.isNextRouterError)(t)||(0,l.isBailoutToCSRError)(t)||(0,a.isDynamicUsageError)(t)||(0,n.isPostpone)(t))throw t;t instanceof Error&&"cause"in t&&e(t.cause)}}});let a=r(62349),n=r(67418),l=r(40627),s=r(11271);("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},62349:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isDynamicUsageError",{enumerable:!0,get:function(){return o}});let a=r(42490),n=r(40627),l=r(11271),s=r(10436),o=e=>(0,a.isDynamicServerError)(e)||(0,n.isBailoutToCSRError)(e)||(0,l.isNextRouterError)(e)||(0,s.isDynamicPostpone)(e)},67418:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isPostpone",{enumerable:!0,get:function(){return a}});let r=Symbol.for("react.postpone");function a(e){return"object"==typeof e&&null!==e&&e.$$typeof===r}},40627:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{BailoutToCSRError:function(){return a},isBailoutToCSRError:function(){return n}});let r="BAILOUT_TO_CLIENT_SIDE_RENDERING";class a extends Error{constructor(e){super("Bail out to client-side rendering: "+e),this.reason=e,this.digest=r}}function n(e){return"object"==typeof e&&null!==e&&"digest"in e&&e.digest===r}}};var t=require("../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[847,950,540],()=>r(26267));module.exports=a})();